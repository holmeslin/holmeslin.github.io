<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Clean Code 系列 - Javascript - Feng-Chi&#39;s Note-Take</title><meta name=renderer content=webkit><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content=no-transform><meta http-equiv=cache-control content=no-siteapp><meta name=theme-color content=#f8f5ec><meta name=msapplication-navbutton-color content=#f8f5ec><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#f8f5ec><meta name=author content=Feng-Chi><meta name=description content><meta name=keywords content="clean code,javascript"><meta name=generator content="Hugo 0.57.2 with theme even"><link rel=canonical href=https://holmeslin.github.io/post/2020/07/30/clean-code-javascript/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.6eb09ed45a88bd339269c14515d2a11f2e0afdadbdd763d83f9b5c797166b081.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property=og:title content="Clean Code 系列 - Javascript"><meta property=og:description content><meta property=og:type content=article><meta property=og:url content=https://holmeslin.github.io/post/2020/07/30/clean-code-javascript/><meta property=article:published_time content=2020-07-30T08:10:05+08:00><meta property=article:modified_time content=2020-07-30T08:10:05+08:00><meta itemprop=name content="Clean Code 系列 - Javascript"><meta itemprop=description content><meta itemprop=datePublished content=2020-07-30T08:10:05&#43;08:00><meta itemprop=dateModified content=2020-07-30T08:10:05&#43;08:00><meta itemprop=wordCount content=13802><meta itemprop=keywords content="clean code,javascript,"><meta name=twitter:card content=summary><meta name=twitter:title content="Clean Code 系列 - Javascript"><meta name=twitter:description content><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Feng-Chi</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/about/><li class=mobile-menu-item>About</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Feng-Chi</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Clean Code 系列 - Javascript</h1><div class=post-meta><span class=post-time>2020-07-30</span><div class=post-category><a href=/categories/%E5%AD%B8%E7%BF%92/>學習</a>
<a href=/categories/%E7%B4%80%E9%8C%84/>紀錄</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目錄</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#無瑕的程式碼-javascript>無瑕的程式碼 JavaScript</a><ul><li><a href=#介紹-introduction>介紹（Introduction）</a></li><li><a href=#變數-variables>變數（Variables）</a><ul><li><a href=#使用具有意義且可閱讀的名稱>使用具有意義且可閱讀的名稱</a></li><li><a href=#相同類型的變數使用相同的名稱>相同類型的變數使用相同的名稱</a></li><li><a href=#使用可搜尋的名稱>使用可搜尋的名稱</a></li><li><a href=#使用可解釋的變數>使用可解釋的變數</a></li><li><a href=#避免心理作用-mental-mapping>避免心理作用（Mental Mapping）</a></li><li><a href=#避免使用不必要的描述-context>避免使用不必要的描述（Context）</a></li><li><a href=#使用預設參數-parameter-代替條件判斷-conditionals>使用預設參數（Parameter）代替條件判斷（Conditionals）</a></li></ul></li><li><a href=#函數-functions>函數（Functions）</a><ul><li><a href=#參數-parameter-少於-2-個較佳>參數（Parameter） (少於 2 個較佳)</a></li><li><a href=#一個函數只做一件事情-單一性>一個函數只做一件事情（單一性）</a></li><li><a href=#函數名稱應該說明它做的內容>函數名稱應該說明它做的內容</a></li><li><a href=#函數應該只做一層抽象-abstraction>函數應該只做一層抽象（Abstraction）</a></li><li><a href=#移除重複的-duplicate-程式碼>移除重複的（Duplicate）程式碼</a></li><li><a href=#使用-object-assign-設定-object-的預設值>使用 <code>Object.assign</code> 設定 <code>Object</code> 的預設值</a></li><li><a href=#不要使用旗標-flag-作為參數>不要使用旗標（Flag）作為參數</a></li><li><a href=#避免副作用-side-effects>避免副作用（Side Effects）</a></li><li><a href=#避免副作用-side-effects-第二部分>避免副作用（Side Effects）第二部分</a></li><li><a href=#別寫全域函數-global-function>別寫全域函數（Global Function）</a></li><li><a href=#偏好使用函數式程式-functional-programming-設計代替命令式程式設計-imperative-programming>偏好使用函數式程式（Functional Programming）設計代替命令式程式設計（Imperative Programming）</a></li><li><a href=#封裝狀態-encapsulate-conditionals>封裝狀態（Encapsulate Conditionals）</a></li><li><a href=#避免負面狀態-negative-conditionals>避免負面狀態（Negative Conditionals）</a></li><li><a href=#避免狀態>避免狀態</a></li><li><a href=#避免型別-type-檢查-第一部分>避免型別（Type）檢查：第一部分</a></li><li><a href=#避免型別檢查-第二部分>避免型別檢查：第二部分</a></li><li><a href=#別過度優化>別過度優化</a></li><li><a href=#移除無用的程式碼-dead-code>移除無用的程式碼（Dead Code）</a></li></ul></li><li><a href=#物件-objects-與資料結構-data-structures>物件（Objects）與資料結構（Data Structures）</a><ul><li><a href=#使用-getters-與-setters>使用 getters 與 setters</a></li><li><a href=#讓物件擁有私有成員-members>讓物件擁有私有成員（members）</a></li></ul></li><li><a href=#類別-classes>類別（Classes）</a><ul><li><a href=#類別語法偏好使用-es2015-es6-的類別更甚於-es5-函數>類別語法偏好使用 ES2015/ES6 的類別更甚於 ES5 函數</a></li><li><a href=#使用方法鏈-method-chaining>使用方法鏈（method chaining）</a></li><li><a href=#偏好組合-composition-更甚於繼承-inheritance>偏好組合（composition）更甚於繼承（inheritance）</a></li></ul></li><li><a href=#物件導向基本原則-solid>物件導向基本原則（SOLID）</a><ul><li><a href=#單一功能原則-single-responsibility-principle-srp>單一功能原則 Single Responsibility Principle (SRP)</a></li><li><a href=#開閉原則-open-closed-principle-ocp>開閉原則 Open/Closed Principle (OCP)</a></li><li><a href=#里氏替換原則-liskov-substitution-principle-lsp>里氏替換原則 Liskov Substitution Principle (LSP)</a></li><li><a href=#介面隔離原則-interface-segregation-principle-isp>介面隔離原則 Interface Segregation Principle (ISP)</a></li><li><a href=#依賴反轉原則-dependency-inversion-principle-dip>依賴反轉原則 Dependency Inversion Principle (DIP)</a></li></ul></li><li><a href=#測試-testing>測試（Testing）</a><ul><li><a href=#每個測試只測試一個概念>每個測試只測試一個概念</a></li></ul></li><li><a href=#並發-concurrency>並發（Concurrency）</a><ul><li><a href=#使用-promises-不要使用回呼函式-callback>使用 Promises，不要使用回呼函式（callback）</a></li><li><a href=#async-await-比-promises-更加簡潔>Async/Await 比 Promises 更加簡潔</a></li></ul></li><li><a href=#錯誤處理-error-handling>錯誤處理（Error Handling）</a><ul><li><a href=#不要忽略捕捉到的錯誤>不要忽略捕捉到的錯誤</a></li><li><a href=#不要忽略被拒絕的-promises>不要忽略被拒絕的 Promises</a></li></ul></li><li><a href=#格式化-formatting>格式化（Formatting）</a><ul><li><a href=#使用一致的大小寫>使用一致的大小寫</a></li><li><a href=#函數的呼叫者應該與被呼叫者靠近>函數的呼叫者應該與被呼叫者靠近</a></li></ul></li><li><a href=#註解-comments>註解（Comments）</a><ul><li><a href=#只對商業邏輯複雜的部分撰寫註解>只對商業邏輯複雜的部分撰寫註解</a></li><li><a href=#不要在程式碼中保留被註解掉的程式碼>不要在程式碼中保留被註解掉的程式碼</a></li><li><a href=#不要留有日誌式的註解>不要留有日誌式的註解</a></li><li><a href=#避免位置標示>避免位置標示</a></li></ul></li><li><a href=#翻譯-translation>翻譯（Translation）</a></li></ul></li></ul></nav></div></div><div class=post-content><blockquote><p>次篇文章是轉載 <a href=https://github.com/AllJointTW/clean-code-javascript>此篇文章</a></p></blockquote><h1 id=無瑕的程式碼-javascript>無瑕的程式碼 JavaScript</h1><blockquote><p>原作： <a href=https://github.com/ryanmcdermott/clean-code-javascript>https://github.com/ryanmcdermott/clean-code-javascript</a><br>原作者： <a href=https://github.com/ryanmcdermott>https://github.com/ryanmcdermott</a><br>譯者： <a href=https://github.com/trylovetom>https://github.com/trylovetom</a></p></blockquote><h2 id=介紹-introduction>介紹（Introduction）</h2><p><img src=http://www.osnews.com/images/comics/wtfm.jpg alt=透過計算閱讀程式碼時的咒罵次數，來評估軟體品質><br>透過計算閱讀程式碼時的咒罵次數，來評估軟體品質<br><br>文章作者根據 Robert C. Martin 的<a href=https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882>《無暇的程式碼》</a>，撰寫一份適用於 JavaScript 的原則。本文不是風格指南（Style Guide），而是教導你撰寫出<a href=https://github.com/ryanmcdermott/3rs-of-software-architecture>可閱讀、可重複使用與可重構</a>的 JS 程式碼。</p><p>注意！你不必嚴格遵守每一項原則，有些甚至不被大眾所認同。雖然這只是份指南，卻是來自《無暇的程式碼》作者的多年結晶。</p><p>軟體工程只發展了五十年，仍然有很多地方值得去探討。當軟體與建築一樣古老時，也許會有一些墨守成規的原則。但現在，先讓這份指南當試金石，作為你和團隊的 JS 程式碼標準。</p><p>還有一件事情：知道這些原則，並不會立刻讓你成為出色的開發者，長期奉行它們，不代表你能高枕無憂不再犯錯。但是，千里之行，始於足下，時常與志同道合們進行討論（Code Review），改善不完備之處。不要因為自己寫出來的程式碼很糟糕而害怕分享，而是要畏懼自己居然寫出了這樣的程式碼！</p><p><strong>譯者序</strong></p><blockquote><p>獻給<a href=https://alljoint.tw/>傲嬌文創</a>的所有工程師夥伴，與熱愛 JavaScript 的各位。</p></blockquote><p>《無暇的程式碼》是一本好書，是不可否認這個事實。我熱愛著 JS，當找到這份 JS 版本的後，我無比開心立刻著手翻譯，因此有了這份《無暇的程式碼 JavaScript》。對於 <em>Clean Code</em> 的書名採用博碩文化的翻譯，也是對原版譯者的尊敬。本翻譯中會穿插一些我對文章中註解，也請讀者原諒我的叨擾。另外專業術語的翻譯有可能會有出入，我會標示出英文原文，避免讀者誤解。如有翻譯或是理解上的錯誤，煩請聯絡我，謝謝。（聯絡方式在上方，我的 GitHub 中。）</p><h2 id=變數-variables>變數（Variables）</h2><h3 id=使用具有意義且可閱讀的名稱>使用具有意義且可閱讀的名稱</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>yyyymmdstr</span> <span class=o>=</span> <span class=nx>moment</span><span class=p>().</span><span class=nx>format</span><span class=p>(</span><span class=s1>&#39;YYYY/MM/DD&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>currentDate</span> <span class=o>=</span> <span class=nx>moment</span><span class=p>().</span><span class=nx>format</span><span class=p>(</span><span class=s1>&#39;YYYY/MM/DD&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=相同類型的變數使用相同的名稱>相同類型的變數使用相同的名稱</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>getUserInfo</span><span class=p>()</span>
<span class=nx>getClientData</span><span class=p>()</span>
<span class=nx>getCustomerRecord</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>getUser</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=使用可搜尋的名稱>使用可搜尋的名稱</h3><p>使用易於閱讀與搜尋的名稱非常重要，因為我們要閱讀的程式碼遠比自己寫得多。使用沒有意義的名稱，會導致程式碼難以理解，對後續閱讀者是個糟糕的體驗。另外使用以下工具，可以協助你找出未命名的常數：</p><ul><li><a href=https://github.com/danielstjules/buddy.js>buddy.js</a></li><li><a href=https://github.com/eslint/eslint/blob/660e0918933e6e7fede26bc675a0763a6b357c94/docs/rules/no-magic-numbers.md>ESLint</a></li></ul><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// 86400000 代表什麼意義？
</span><span class=c1></span><span class=nx>setTimeout</span><span class=p>(</span><span class=nx>blastOff</span><span class=p>,</span> <span class=mi>86400000</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// 宣告（Declare）一個有意義的常數（constants）
</span><span class=c1></span><span class=k>const</span> <span class=nx>MILLISECONDS_IN_A_DAY</span> <span class=o>=</span> <span class=mi>86400000</span>

<span class=nx>setTimeout</span><span class=p>(</span><span class=nx>blastOff</span><span class=p>,</span> <span class=nx>MILLISECONDS_IN_A_DAY</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=使用可解釋的變數>使用可解釋的變數</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>address</span> <span class=o>=</span> <span class=s1>&#39;One Infinite Loop, Cupertino 95014&#39;</span>
<span class=k>const</span> <span class=nx>cityZipCodeRegex</span> <span class=o>=</span> <span class=sr>/^[^,\\]+[,\\\s]+(.+?)\s*(\d{5})?$/</span>
<span class=nx>saveCityZipCode</span><span class=p>(</span>
  <span class=nx>address</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=nx>cityZipCodeRegex</span><span class=p>)[</span><span class=mi>1</span><span class=p>],</span>
  <span class=nx>address</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=nx>cityZipCodeRegex</span><span class=p>)[</span><span class=mi>2</span><span class=p>]</span>
<span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>address</span> <span class=o>=</span> <span class=s1>&#39;One Infinite Loop, Cupertino 95014&#39;</span>
<span class=k>const</span> <span class=nx>cityZipCodeRegex</span> <span class=o>=</span> <span class=sr>/^[^,\\]+[,\\\s]+(.+?)\s*(\d{5})?$/</span>
<span class=k>const</span> <span class=p>[,</span> <span class=nx>city</span><span class=p>,</span> <span class=nx>zipCode</span><span class=p>]</span> <span class=o>=</span> <span class=nx>address</span><span class=p>.</span><span class=nx>match</span><span class=p>(</span><span class=nx>cityZipCodeRegex</span><span class=p>)</span> <span class=o>||</span> <span class=p>[]</span>
<span class=nx>saveCityZipCode</span><span class=p>(</span><span class=nx>city</span><span class=p>,</span> <span class=nx>zipCode</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p><code>address.match(cityZipCodeRegex)</code> 取出了字串中的 city 與 zipCode 並以陣列（Array）的方式輸出。在糟糕的範例中，你不會知道哪個是 city，哪個是 zipCode。在適當的範例中，則清楚地解釋了。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免心理作用-mental-mapping>避免心理作用（Mental Mapping）</h3><p>清晰（Explicit）的表達會比隱藏（Implicit）更好。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>locations</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Austin&#39;</span><span class=p>,</span> <span class=s1>&#39;New York&#39;</span><span class=p>,</span> <span class=s1>&#39;San Francisco&#39;</span><span class=p>]</span>
<span class=nx>locations</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>l</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=nx>doStuff</span><span class=p>()</span>
  <span class=nx>doSomeOtherStuff</span><span class=p>()</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=c1>// ...
</span><span class=c1></span>  <span class=c1>// ...
</span><span class=c1></span>  <span class=c1>// 等等，這 `l` 是…？
</span><span class=c1></span>  <span class=nx>dispatch</span><span class=p>(</span><span class=nx>l</span><span class=p>)</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>locations</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Austin&#39;</span><span class=p>,</span> <span class=s1>&#39;New York&#39;</span><span class=p>,</span> <span class=s1>&#39;San Francisco&#39;</span><span class=p>]</span>
<span class=nx>locations</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>location</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=nx>doStuff</span><span class=p>()</span>
  <span class=nx>doSomeOtherStuff</span><span class=p>()</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=c1>// ...
</span><span class=c1></span>  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>dispatch</span><span class=p>(</span><span class=nx>location</span><span class=p>)</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>在糟糕的範例中，程式碼的作者認為從 <code>locations</code> 取出的都是地址，所以選用縮減後的 <code>l</code> 作為名稱。不過這只有作者自己這麼認為，其他人可不一定知道。避免「我認為」、「我以為」、「我覺得」，這樣的心理作用。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免使用不必要的描述-context>避免使用不必要的描述（Context）</h3><p>如果你的類別與物件名稱是有關聯意義的，就不用在內部變數上再次重複。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>Car</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>carMake</span><span class=o>:</span> <span class=s1>&#39;Honda&#39;</span><span class=p>,</span>
  <span class=nx>carModel</span><span class=o>:</span> <span class=s1>&#39;Accord&#39;</span><span class=p>,</span>
  <span class=nx>carColor</span><span class=o>:</span> <span class=s1>&#39;Blue&#39;</span><span class=p>,</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>paintCar</span><span class=p>(</span><span class=nx>car</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>car</span><span class=p>.</span><span class=nx>carColor</span> <span class=o>=</span> <span class=s1>&#39;Red&#39;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>Car</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>make</span><span class=o>:</span> <span class=s1>&#39;Honda&#39;</span><span class=p>,</span>
  <span class=nx>model</span><span class=o>:</span> <span class=s1>&#39;Accord&#39;</span><span class=p>,</span>
  <span class=nx>color</span><span class=o>:</span> <span class=s1>&#39;Blue&#39;</span><span class=p>,</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>paintCar</span><span class=p>(</span><span class=nx>car</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>car</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s1>&#39;Red&#39;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=使用預設參數-parameter-代替條件判斷-conditionals>使用預設參數（Parameter）代替條件判斷（Conditionals）</h3><p>使用預設參數較整潔，但請注意，當參數為 <code>undefined</code> 時才會作用，其他種類的虛值（Falsy）不會，像是 <code>''</code>、<code>false</code>、<code>null</code>、<code>0</code>、<code>NaN</code> 等。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createMicrobrewery</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>breweryName</span> <span class=o>=</span> <span class=nx>name</span> <span class=o>||</span> <span class=s1>&#39;Hipster Brew Co.&#39;</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createMicrobrewery</span><span class=p>(</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;Hipster Brew Co.&#39;</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>預設參數非常好用，可以結合工廠模式做出很多應用。另外建議統一使用 <code>undefined</code> 代替 <code>null</code> 當作空值的回傳值。</p><p>此處原文為 <strong>Arguments</strong>，但是函數的參數定義應該為 <strong>Parameter</strong>，而呼叫函數時傳遞的引數才是 <strong>Arguments</strong>。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=函數-functions>函數（Functions）</h2><h3 id=參數-parameter-少於-2-個較佳>參數（Parameter） (少於 2 個較佳)</h3><p>限制函數的參數數量非常重要，因為能讓你更容易地測試。過多的參數代表著過多的組合，會導致你不得不編寫出大量測試。</p><p>一個至二個是最理想的，盡可能避免大於三個以上。如果你有超過兩個以上的參數，代表你的函數做太多事情。如果無法避免時，可以有效地使用物件替代大量的參數。</p><p>為了讓你可以清晰地表達，預期使用哪些物件的屬性（Properties），可以使用 ES2015/ES6 提供的解構（Destructuring）語法。使用這種語法有以下優點：</p><ol><li>函數需要物件的哪些屬性，可以像參數一樣清晰地表達。</li><li>解構語法會複製來自物件的原始型態（Primitive），這能幫助你避免邊際效應（Side Effect）。注意！巢狀物件與陣列，並不會被解構語法複製。</li><li>使用解構語法能讓物件屬性被程式碼檢查器（Linter）作用，提醒你哪些屬性未被使用到。</li></ol><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createMenu</span><span class=p>(</span><span class=nx>title</span><span class=p>,</span> <span class=nx>body</span><span class=p>,</span> <span class=nx>buttonText</span><span class=p>,</span> <span class=nx>cancellable</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createMenu</span><span class=p>({</span> <span class=nx>title</span><span class=p>,</span> <span class=nx>body</span><span class=p>,</span> <span class=nx>buttonText</span><span class=p>,</span> <span class=nx>cancellable</span> <span class=p>})</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=nx>createMenu</span><span class=p>({</span>
  <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Foo&#39;</span><span class=p>,</span>
  <span class=nx>body</span><span class=o>:</span> <span class=s1>&#39;Bar&#39;</span><span class=p>,</span>
  <span class=nx>buttonText</span><span class=o>:</span> <span class=s1>&#39;Baz&#39;</span><span class=p>,</span>
  <span class=nx>cancellable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>這種方法非常適合用於工廠模式，結合上一章的預設參數，譯者推薦的使用方式如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createMenu</span><span class=p>({</span>
  <span class=nx>title</span> <span class=o>=</span> <span class=s1>&#39;Default Title&#39;</span><span class=p>,</span> <span class=c1>// 傳遞的物件不齊全，使用預設屬性
</span><span class=c1></span>  <span class=nx>body</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
  <span class=nx>buttonText</span> <span class=o>=</span> <span class=s1>&#39;My Button&#39;</span><span class=p>,</span>
  <span class=nx>cancellable</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>}</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
  <span class=c1>// 如未傳遞任何參數使用預設空物件，使用 `= {}` 可避免 TypeError: Cannot destructure property `...` of &#39;undefined&#39; or &#39;null&#39;.
</span><span class=c1></span>  <span class=k>return</span> <span class=p>{</span>
    <span class=nx>title</span><span class=p>,</span>
    <span class=nx>body</span><span class=p>,</span>
    <span class=nx>buttonText</span><span class=p>,</span>
    <span class=nx>cancellable</span><span class=p>,</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>myMenu</span> <span class=o>=</span> <span class=nx>createMenu</span><span class=p>({</span>
  <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Foo&#39;</span><span class=p>,</span>
  <span class=nx>body</span><span class=o>:</span> <span class=s1>&#39;Bar&#39;</span><span class=p>,</span>
  <span class=nx>buttonText</span><span class=o>:</span> <span class=s1>&#39;Baz&#39;</span><span class=p>,</span>
  <span class=nx>cancellable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p>想了解更多工廠模式與 ES6 的結合，可參考連結文章：<a href=https://medium.com/javascript-scene/javascript-factory-functions-with-es6-4d224591a8b1>JavaScript Factory Functions with ES6+</a>。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=一個函數只做一件事情-單一性>一個函數只做一件事情（單一性）</h3><p>這是個非常重要的原則，當你的函數做超過一件事情時，它會更難以被撰寫、測試與理解。當你隔離（Isolate）你的函數到只做一件事情時，它能更容易地被重構（Refactor）與清晰地閱讀。如果嚴格遵守此項原則，你將會領先許多開發者。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>emailClients</span><span class=p>(</span><span class=nx>clients</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>clients</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>client</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>clientRecord</span> <span class=o>=</span> <span class=nx>database</span><span class=p>.</span><span class=nx>lookup</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>clientRecord</span><span class=p>.</span><span class=nx>isActive</span><span class=p>())</span> <span class=p>{</span>
      <span class=nx>email</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span>
    <span class=p>}</span>
  <span class=p>})</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>emailActiveClients</span><span class=p>(</span><span class=nx>clients</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>clients</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>isActiveClient</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>email</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>isActiveClient</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>clientRecord</span> <span class=o>=</span> <span class=nx>database</span><span class=p>.</span><span class=nx>lookup</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span>
  <span class=k>return</span> <span class=nx>clientRecord</span><span class=p>.</span><span class=nx>isActive</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=函數名稱應該說明它做的內容>函數名稱應該說明它做的內容</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>addToDate</span><span class=p>(</span><span class=nx>date</span><span class=p>,</span> <span class=nx>month</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>const</span> <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>

<span class=c1>// 難以從函數名稱看出到底加入了什麼
</span><span class=c1></span><span class=nx>addToDate</span><span class=p>(</span><span class=nx>date</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>addMonthToDate</span><span class=p>(</span><span class=nx>month</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>const</span> <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
<span class=nx>addMonthToDate</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>建議函數命名以動詞開頭，像是 <code>doSomething()</code>、<code>setupUserProfile()</code>。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=函數應該只做一層抽象-abstraction>函數應該只做一層抽象（Abstraction）</h3><p>當你的函數需要的抽象多於一層時，代表你的函數做太多事情了。將其分解以利重用與測試。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>parseBetterJSAlternative</span><span class=p>(</span><span class=nx>code</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>REGEXES</span> <span class=o>=</span> <span class=p>[</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>]</span>

  <span class=k>const</span> <span class=nx>statements</span> <span class=o>=</span> <span class=nx>code</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
  <span class=k>const</span> <span class=nx>tokens</span> <span class=o>=</span> <span class=p>[]</span>
  <span class=nx>REGEXES</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>REGEX</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>statements</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>statement</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
      <span class=c1>// ...
</span><span class=c1></span>    <span class=p>})</span>
  <span class=p>})</span>

  <span class=k>const</span> <span class=nx>ast</span> <span class=o>=</span> <span class=p>[]</span>
  <span class=nx>tokens</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>token</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=c1>// lex...
</span><span class=c1></span>  <span class=p>})</span>

  <span class=nx>ast</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>node</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=c1>// parse...
</span><span class=c1></span>  <span class=p>})</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>parseBetterJSAlternative</span><span class=p>(</span><span class=nx>code</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>tokens</span> <span class=o>=</span> <span class=nx>tokenize</span><span class=p>(</span><span class=nx>code</span><span class=p>)</span>
  <span class=k>const</span> <span class=nx>syntaxTree</span> <span class=o>=</span> <span class=nx>parse</span><span class=p>(</span><span class=nx>tokens</span><span class=p>)</span>
  <span class=nx>syntaxTree</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>node</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=c1>// parse...
</span><span class=c1></span>  <span class=p>})</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>tokenize</span><span class=p>(</span><span class=nx>code</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>REGEXES</span> <span class=o>=</span> <span class=p>[</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>]</span>

  <span class=k>const</span> <span class=nx>statements</span> <span class=o>=</span> <span class=nx>code</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
  <span class=k>const</span> <span class=nx>tokens</span> <span class=o>=</span> <span class=p>[]</span>
  <span class=nx>REGEXES</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>REGEX</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>statements</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>statement</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
      <span class=nx>tokens</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
    <span class=p>})</span>
  <span class=p>})</span>

  <span class=k>return</span> <span class=nx>tokens</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>parse</span><span class=p>(</span><span class=nx>tokens</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>syntaxTree</span> <span class=o>=</span> <span class=p>[]</span>
  <span class=nx>tokens</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>token</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>syntaxTree</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
  <span class=p>})</span>

  <span class=k>return</span> <span class=nx>syntaxTree</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>這個原則與前面提到的「一個函數只做一件事情（單一性）」概念相似。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=移除重複的-duplicate-程式碼>移除重複的（Duplicate）程式碼</h3><p>絕對避免重複的程式碼，重複的程式碼代表者更動邏輯時，需要同時修改多處。</p><p>想像一下你經營著一家餐廳，需要持續追蹤存貨：番茄、洋蔥、大蒜與各種香料等。如果你有多份紀錄表，當使用蕃茄做完一道料理時，需要更新多份記錄表，可能會忘記更新其中一份。如果你只有一份記錄表，就不會有此問題！</p><p>通常重複的程式碼，是因為有兩個稍微不同的東西。它們之間絕大部分相同，但些微不同之處，迫使你使用多個函數處理相似的事情。如果出現重複的程式碼，可以使用函數、模組或是類別來抽象化處理。</p><p>正確的抽象化是非常關鍵的，這也是為什麼你應該遵循<a href=#類別Classes>類別（Classes）</a>章節中，物件導向基本原則 SOLID 的原因。請小心，較差的抽象化會比重複的程式碼更糟！這麼說吧，如果你有把握做出好的抽象化，盡情放手去做。別讓程式碼出現重複的地方，不然你會需要修改更多的程式碼。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>showDeveloperList</span><span class=p>(</span><span class=nx>developers</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>developers</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>developer</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>expectedSalary</span> <span class=o>=</span> <span class=nx>developer</span><span class=p>.</span><span class=nx>calculateExpectedSalary</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>experience</span> <span class=o>=</span> <span class=nx>developer</span><span class=p>.</span><span class=nx>getExperience</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>githubLink</span> <span class=o>=</span> <span class=nx>developer</span><span class=p>.</span><span class=nx>getGithubLink</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>{</span>
      <span class=nx>expectedSalary</span><span class=p>,</span>
      <span class=nx>experience</span><span class=p>,</span>
      <span class=nx>githubLink</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=nx>render</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>showManagerList</span><span class=p>(</span><span class=nx>managers</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>managers</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>manager</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>expectedSalary</span> <span class=o>=</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>calculateExpectedSalary</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>experience</span> <span class=o>=</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>getExperience</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>portfolio</span> <span class=o>=</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>getMBAProjects</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>{</span>
      <span class=nx>expectedSalary</span><span class=p>,</span>
      <span class=nx>experience</span><span class=p>,</span>
      <span class=nx>portfolio</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=nx>render</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>showEmployeeList</span><span class=p>(</span><span class=nx>employees</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>employees</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>employee</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>expectedSalary</span> <span class=o>=</span> <span class=nx>employee</span><span class=p>.</span><span class=nx>calculateExpectedSalary</span><span class=p>()</span>
    <span class=k>const</span> <span class=nx>experience</span> <span class=o>=</span> <span class=nx>employee</span><span class=p>.</span><span class=nx>getExperience</span><span class=p>()</span>

    <span class=k>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>{</span>
      <span class=nx>expectedSalary</span><span class=p>,</span>
      <span class=nx>experience</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=k>switch</span> <span class=p>(</span><span class=nx>employee</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>case</span> <span class=s1>&#39;manager&#39;</span><span class=o>:</span>
        <span class=nx>data</span><span class=p>.</span><span class=nx>portfolio</span> <span class=o>=</span> <span class=nx>employee</span><span class=p>.</span><span class=nx>getMBAProjects</span><span class=p>()</span>
        <span class=k>break</span>
      <span class=k>case</span> <span class=s1>&#39;developer&#39;</span><span class=o>:</span>
        <span class=nx>data</span><span class=p>.</span><span class=nx>githubLink</span> <span class=o>=</span> <span class=nx>employee</span><span class=p>.</span><span class=nx>getGithubLink</span><span class=p>()</span>
        <span class=k>break</span>
    <span class=p>}</span>

    <span class=nx>render</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>剛讀完這個原則時，我非常遵守，但是個人龜毛的個性，造成了不少麻煩，我會在開發時不斷的思考是否會出現了重複的程式碼，甚至考慮到了之後的重用性。代價就是過度設計（Over Engineering）造成功能開發窒礙難行，設計了良好架構，但實際上並未被使用到。最後總結了一個建議作為附加原則：一開始撰寫程式碼先以功能開發優先，當你發現有兩個以上的地方重複時，再來考慮要不要重構。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=使用-object-assign-設定-object-的預設值>使用 <code>Object.assign</code> 設定 <code>Object</code> 的預設值</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>menuConfig</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>title</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
  <span class=nx>body</span><span class=o>:</span> <span class=s1>&#39;Bar&#39;</span><span class=p>,</span>
  <span class=nx>buttonText</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
  <span class=nx>cancellable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>createMenu</span><span class=p>(</span><span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>config</span><span class=p>.</span><span class=nx>title</span> <span class=o>=</span> <span class=nx>config</span><span class=p>.</span><span class=nx>title</span> <span class=o>||</span> <span class=s1>&#39;Foo&#39;</span>
  <span class=nx>config</span><span class=p>.</span><span class=nx>body</span> <span class=o>=</span> <span class=nx>config</span><span class=p>.</span><span class=nx>body</span> <span class=o>||</span> <span class=s1>&#39;Bar&#39;</span>
  <span class=nx>config</span><span class=p>.</span><span class=nx>buttonText</span> <span class=o>=</span> <span class=nx>config</span><span class=p>.</span><span class=nx>buttonText</span> <span class=o>||</span> <span class=s1>&#39;Baz&#39;</span>
  <span class=nx>config</span><span class=p>.</span><span class=nx>cancellable</span> <span class=o>=</span>
    <span class=nx>config</span><span class=p>.</span><span class=nx>cancellable</span> <span class=o>!==</span> <span class=kc>undefined</span> <span class=o>?</span> <span class=nx>config</span><span class=p>.</span><span class=nx>cancellable</span> <span class=o>:</span> <span class=kc>true</span>
<span class=p>}</span>

<span class=nx>createMenu</span><span class=p>(</span><span class=nx>menuConfig</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>menuConfig</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Order&#39;</span><span class=p>,</span>
  <span class=c1>// 使用者漏掉了 &#39;body&#39;
</span><span class=c1></span>  <span class=nx>buttonText</span><span class=o>:</span> <span class=s1>&#39;Send&#39;</span><span class=p>,</span>
  <span class=nx>cancellable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>createMenu</span><span class=p>(</span><span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>config</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>assign</span><span class=p>(</span>
    <span class=p>{</span>
      <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Foo&#39;</span><span class=p>,</span>
      <span class=nx>body</span><span class=o>:</span> <span class=s1>&#39;Bar&#39;</span><span class=p>,</span>
      <span class=nx>buttonText</span><span class=o>:</span> <span class=s1>&#39;Baz&#39;</span><span class=p>,</span>
      <span class=nx>cancellable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=p>},</span>
    <span class=nx>config</span>
  <span class=p>)</span>

  <span class=c1>// config 現在等同於： {title: &#39;Order&#39;, body: &#39;Bar&#39;, buttonText: &#39;Send&#39;, cancellable: true}
</span><span class=c1></span>  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=nx>createMenu</span><span class=p>(</span><span class=nx>menuConfig</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=不要使用旗標-flag-作為參數>不要使用旗標（Flag）作為參數</h3><p>當你的函數使用了旗標當作參數時，代表函數做不只一件事情，依照不同旗標路徑切分你的函數。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createFile</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>temp</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=nx>temp</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>fs</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=sb>`./temp/</span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=nx>fs</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>createFile</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>fs</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>createTempFile</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>createFile</span><span class=p>(</span><span class=sb>`./temp/</span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免副作用-side-effects>避免副作用（Side Effects）</h3><p>當函數作用在除了回傳值外的地方，像是讀寫文件、修改全域變數或是將你的錢轉帳到其他人帳戶，則稱為副作用。</p><p>程式在某些情況下是需要副作用的，像是上面所提到的例子。這時你應該將這些功能集中在一起，不要同時有多個函數或是類別同時操作資源，應該只用一個服務（Service）完成這些事情。</p><p>常見的問題像是：</p><ul><li>在沒有任何架構下，同時多個物件中分享共有狀態。</li><li>可變的狀態，且可以被任何人寫入</li><li>副作用發生的地方沒有被集中。</li></ul><p>如果你能避免這些問題，你會比大多數的工程師快樂。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// 全域變數被以下函數使用
</span><span class=c1>// 假如有其他的函數使用了這個名稱，現在他變成了陣列，將會被破壞而出錯。
</span><span class=c1></span><span class=kd>let</span> <span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;Ryan McDermott&#39;</span>

<span class=kd>function</span> <span class=nx>splitIntoFirstAndLastName</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
<span class=p>}</span>

<span class=nx>splitIntoFirstAndLastName</span><span class=p>()</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=c1>// [&#39;Ryan&#39;, &#39;McDermott&#39;];
</span></code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>splitIntoFirstAndLastName</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>name</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;Ryan McDermott&#39;</span>
<span class=k>const</span> <span class=nx>newName</span> <span class=o>=</span> <span class=nx>splitIntoFirstAndLastName</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span>

<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=c1>// &#39;Ryan McDermott&#39;;
</span><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>newName</span><span class=p>)</span> <span class=c1>// [&#39;Ryan&#39;, &#39;McDermott&#39;];
</span></code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免副作用-side-effects-第二部分>避免副作用（Side Effects）第二部分</h3><p>在 JavaScript 中，原始資料類型傳遞數值（Value），物件/陣列傳遞參照（Reference）。在本案例中，你的函數改變了購物車清單 <code>cart</code> 中的陣列，像是你增加了一個商品，其他使用購物車清單的函數將會被影響。這做法有好有壞，讓我解釋一下問題所在：</p><p>使用者按下付款按鈕後，將會呼叫 <code>purchase</code> 函數，產生一個網路請求傳送購物車清單陣列到伺服器。因為較差的網路連線，必須多嘗試幾次。此時使用者不小心又按下加入購物車按鈕，因為是參考的關係，請求將會送出新加入的商品。</p><p>較好的解決辦法是 <code>addItemToCart</code> 函數，執行前複製新的一份購物車清單，修改複製的資料後再回傳。這能確保其他的函數的購物車清單沒有任何機會被被參考所影響。</p><p>使用這方法前，有兩個警告要告知：</p><ol><li><p>當採用這種做法後，你會發現，需要修改輸入物件的情況非常少。大多數的程式碼可以在沒有副作用的情況下重構！</p></li><li><p>複製大型物件，需要花費高昂的效能。幸好，我們有好的<a href=https://immutable-js.github.io/immutable-js/>函數庫</a>，可以提升複製物件與陣列的速度與減少記憶體使用。</p></li></ol><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>addItemToCart</span> <span class=o>=</span> <span class=p>(</span><span class=nx>cart</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=nx>cart</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>item</span><span class=p>,</span> <span class=nx>date</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=p>})</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>addItemToCart</span> <span class=o>=</span> <span class=p>(</span><span class=nx>cart</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=k>return</span> <span class=p>[...</span><span class=nx>cart</span><span class=p>,</span> <span class=p>{</span> <span class=nx>item</span><span class=p>,</span> <span class=nx>date</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=p>}]</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>譯者這邊另外再提供一個案例，函數 <code>checkIs18Age</code> 用來檢查是否成年。第一個寫法中，引用了全域（global）變數 <code>minimum</code>，這功能看起來能正常運作沒問題，但是今天如果有其他函數 <code>setMinAge</code> 修改了全域變數 <code>minimum</code>，函數 <code>checkIs18Age</code> 將會因為副作用的關係變的無法預期，甚至失去它的作用。</p><p>較好的寫法是，採用純函數（pure function），使用一個可預期的變數，來避免副作用影響。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>let</span> <span class=nx>minimum</span> <span class=o>=</span> <span class=mi>18</span>

<span class=c1>// impure with side effect
</span><span class=c1></span><span class=k>const</span> <span class=nx>checkIs18Age</span> <span class=o>=</span> <span class=p>(</span><span class=nx>age</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>age</span> <span class=o>&gt;=</span> <span class=nx>minimum</span>
<span class=k>const</span> <span class=nx>setMinAge</span> <span class=o>=</span> <span class=p>(</span><span class=nx>age</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>minimum</span> <span class=o>=</span> <span class=nx>age</span><span class=p>)</span>

<span class=c1>// pure
</span><span class=c1></span><span class=k>const</span> <span class=nx>checkIs18Age</span> <span class=o>=</span> <span class=p>(</span><span class=nx>age</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>minimum</span> <span class=o>=</span> <span class=mi>18</span>
  <span class=k>return</span> <span class=nx>age</span> <span class=o>&gt;=</span> <span class=nx>minimum</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>另外使用解構的方式複製資料，只會複製第一層而已。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// 巢狀解構只能複製第一層
</span><span class=c1></span><span class=k>const</span> <span class=nx>obj1</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>subObj</span><span class=o>:</span> <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;Hey&#39;</span> <span class=p>}</span> <span class=p>}</span>
<span class=k>const</span> <span class=nx>obj2</span> <span class=o>=</span> <span class=p>{</span> <span class=p>...</span><span class=nx>obj1</span> <span class=p>}</span>

<span class=nx>obj2</span><span class=p>.</span><span class=nx>subObj</span><span class=p>.</span><span class=nx>message</span> <span class=o>=</span> <span class=s1>&#39;Yo&#39;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>obj1</span><span class=p>.</span><span class=nx>subObj</span><span class=p>.</span><span class=nx>message</span><span class=p>)</span> <span class=c1>// &#39;Yo&#39;
</span></code></pre></td></tr></table></div></div><p>如果要複製巢狀結構，你需要深度複製。可以使用一些函數庫 <a href=https://lodash.com/>loadsh</a> 的 <code>_.CloneDeep</code> 或是 <a href=https://ramdajs.com/>ramda</a> 的 <code>clone</code>。或是使用 <code>JSON.parse(JSON.stringify(object))</code> 來實現。不過使用 JSON 的話，會失去 Function 的複製。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// 使用 JSON 來深度複製
</span><span class=c1></span><span class=k>const</span> <span class=nx>obj1</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>subObj</span><span class=o>:</span> <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;Hey&#39;</span> <span class=p>}</span> <span class=p>}</span>
<span class=k>const</span> <span class=nx>obj2</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>obj1</span><span class=p>))</span>

<span class=nx>obj2</span><span class=p>.</span><span class=nx>subObj</span><span class=p>.</span><span class=nx>message</span> <span class=o>=</span> <span class=s1>&#39;Yo&#39;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>obj1</span><span class=p>.</span><span class=nx>subObj</span><span class=p>.</span><span class=nx>message</span><span class=p>)</span> <span class=c1>// &#39;Hey&#39;
</span></code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=別寫全域函數-global-function>別寫全域函數（Global Function）</h3><p>在 JavaScript 中弄髒全域是個不好的做法，因為你可能會影響到其他函數庫或是 API。舉個例子，如果妳想要在 JavaScript 的原生陣列方法，擴展 <code>diff</code> 方法，用 B 陣列來去除 A 陣列中的元素（Element）。常見做法你可能會在 <code>Array.prototype</code> 中增加一個全新的函數，如果其他函數庫也有自己的 <code>diff</code> 實現的話將會互相影響。這就是為什麼我們需要使用 ES2015/ES6 的類別，來擴展的原因。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nb>Array</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>diff</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>diff</span><span class=p>(</span><span class=nx>comparisonArray</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>const</span> <span class=nx>hash</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>(</span><span class=nx>comparisonArray</span><span class=p>)</span>
  <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>elem</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=o>!</span><span class=nx>hash</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>elem</span><span class=p>))</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>SuperArray</span> <span class=k>extends</span> <span class=nb>Array</span> <span class=p>{</span>
  <span class=nx>diff</span><span class=p>(</span><span class=nx>comparisonArray</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>hash</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>(</span><span class=nx>comparisonArray</span><span class=p>)</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>elem</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=o>!</span><span class=nx>hash</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>elem</span><span class=p>))</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=偏好使用函數式程式-functional-programming-設計代替命令式程式設計-imperative-programming>偏好使用函數式程式（Functional Programming）設計代替命令式程式設計（Imperative Programming）</h3><p>JavaScript 不是像 Haskell 一樣的函數式語言，但它具有類似特性。函數式程式設計更加乾淨且容易被測試。當你在寫程式時，盡量選擇此設計方式。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>programmerOutput</span> <span class=o>=</span> <span class=p>[</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Uncle Bobby&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Suzie Q&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>1500</span><span class=p>,</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Jimmy Gosling&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>150</span><span class=p>,</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Gracie Hopper&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>1000</span><span class=p>,</span>
  <span class=p>},</span>
<span class=p>]</span>

<span class=kd>let</span> <span class=nx>totalOutput</span> <span class=o>=</span> <span class=mi>0</span>

<span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>programmerOutput</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>totalOutput</span> <span class=o>+=</span> <span class=nx>programmerOutput</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>linesOfCode</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>programmerOutput</span> <span class=o>=</span> <span class=p>[</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Uncle Bobby&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Suzie Q&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>1500</span><span class=p>,</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Jimmy Gosling&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>150</span><span class=p>,</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Gracie Hopper&#39;</span><span class=p>,</span>
    <span class=nx>linesOfCode</span><span class=o>:</span> <span class=mi>1000</span><span class=p>,</span>
  <span class=p>},</span>
<span class=p>]</span>

<span class=k>const</span> <span class=nx>totalOutput</span> <span class=o>=</span> <span class=nx>programmerOutput</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span>
  <span class=p>(</span><span class=nx>totalLines</span><span class=p>,</span> <span class=nx>output</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>totalLines</span> <span class=o>+</span> <span class=nx>output</span><span class=p>.</span><span class=nx>linesOfCode</span><span class=p>,</span>
  <span class=mi>0</span>
<span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=封裝狀態-encapsulate-conditionals>封裝狀態（Encapsulate Conditionals）</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>if</span> <span class=p>(</span><span class=nx>fsm</span><span class=p>.</span><span class=nx>state</span> <span class=o>===</span> <span class=s1>&#39;fetching&#39;</span> <span class=o>&amp;&amp;</span> <span class=nx>isEmpty</span><span class=p>(</span><span class=nx>listNode</span><span class=p>))</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>shouldShowSpinner</span><span class=p>(</span><span class=nx>fsm</span><span class=p>,</span> <span class=nx>listNode</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>fsm</span><span class=p>.</span><span class=nx>state</span> <span class=o>===</span> <span class=s1>&#39;fetching&#39;</span> <span class=o>&amp;&amp;</span> <span class=nx>isEmpty</span><span class=p>(</span><span class=nx>listNode</span><span class=p>)</span>
<span class=p>}</span>

<span class=k>if</span> <span class=p>(</span><span class=nx>shouldShowSpinner</span><span class=p>(</span><span class=nx>fsmInstance</span><span class=p>,</span> <span class=nx>listNodeInstance</span><span class=p>))</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免負面狀態-negative-conditionals>避免負面狀態（Negative Conditionals）</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>isDOMNodeNotPresent</span><span class=p>(</span><span class=nx>node</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>isDOMNodeNotPresent</span><span class=p>(</span><span class=nx>node</span><span class=p>))</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>isDOMNodePresent</span><span class=p>(</span><span class=nx>node</span><span class=p>)</span> <span class=p>{</span>
  <span class=o>*</span><span class=c1>// ...*
</span><span class=c1></span><span class=p>}</span>

<span class=k>if</span> <span class=p>(</span><span class=nx>isDOMNodePresent</span><span class=p>(</span><span class=nx>node</span><span class=p>))</span> <span class=p>{</span>
  <span class=o>*</span><span class=c1>// ...*
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免狀態>避免狀態</h3><p>當你第一次聽到時，這聽起來是不可能的任務。大部分的人會說：「怎麼可能不使用 <code>if</code> 語法？」事實上你可以使用多態性（Polymorphism） 達到相同的效果。第二個問題來了，「為什麼我們需要這樣做呢？」依據前面概念，為了保持程式碼的乾淨，當類別或是函數出現 <code>if</code> 語法，代表你的函數做了超過一件事情。記住，一個函數只做一件事情！</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Airplane</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>getCruisingAltitude</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>switch</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>case</span> <span class=s1>&#39;777&#39;</span><span class=o>:</span>
        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMaxAltitude</span><span class=p>()</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>getPassengerCount</span><span class=p>()</span>
      <span class=k>case</span> <span class=s1>&#39;Air Force One&#39;</span><span class=o>:</span>
        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMaxAltitude</span><span class=p>()</span>
      <span class=k>case</span> <span class=s1>&#39;Cessna&#39;</span><span class=o>:</span>
        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMaxAltitude</span><span class=p>()</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>getFuelExpenditure</span><span class=p>()</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Airplane</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>class</span> <span class=nx>Boeing777</span> <span class=k>extends</span> <span class=nx>Airplane</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>getCruisingAltitude</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMaxAltitude</span><span class=p>()</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>getPassengerCount</span><span class=p>()</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>AirForceOne</span> <span class=k>extends</span> <span class=nx>Airplane</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>getCruisingAltitude</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMaxAltitude</span><span class=p>()</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>Cessna</span> <span class=k>extends</span> <span class=nx>Airplane</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>  <span class=nx>getCruisingAltitude</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMaxAltitude</span><span class=p>()</span> <span class=o>-</span> <span class=k>this</span><span class=p>.</span><span class=nx>getFuelExpenditure</span><span class=p>()</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免型別-type-檢查-第一部分>避免型別（Type）檢查：第一部分</h3><p>JavaScript 為弱型別語言，代表函數應能處理任何型別的引數（argument）。有時這會帶給你一些麻煩，讓你需要做型別檢查。有很多方法可以避免這種問題發生，第一種就是統一所有的 API。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>travelToTexas</span><span class=p>(</span><span class=nx>vehicle</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=nx>vehicle</span> <span class=k>instanceof</span> <span class=nx>Bicycle</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>vehicle</span><span class=p>.</span><span class=nx>pedal</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>currentLocation</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Location</span><span class=p>(</span><span class=s1>&#39;texas&#39;</span><span class=p>))</span>
  <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nx>vehicle</span> <span class=k>instanceof</span> <span class=nx>Car</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>vehicle</span><span class=p>.</span><span class=nx>drive</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>currentLocation</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Location</span><span class=p>(</span><span class=s1>&#39;texas&#39;</span><span class=p>))</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>travelToTexas</span><span class=p>(</span><span class=nx>vehicle</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>vehicle</span><span class=p>.</span><span class=nx>move</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>currentLocation</span><span class=p>,</span> <span class=k>new</span> <span class=nx>Location</span><span class=p>(</span><span class=s1>&#39;texas&#39;</span><span class=p>))</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>此範例統一了所有的車輛移動的參數、方法與實作，所以不再需要區分不同的類別的車輛呼叫不同的方法。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免型別檢查-第二部分>避免型別檢查：第二部分</h3><p>假設你需要型別檢查原始數值，像是字串與整數且你無法使用多態性處理，考慮使用 TypeScript 吧。他是提供標準 JavaScript 靜態類型的的最佳選擇。手動型別檢查需要很多額外處理，你得到的是虛假的型別安全，且失去的可讀性。保持你的 JavaScript 程式碼的整潔、寫好測試與足夠的程式碼審查（Code Review）。如果加上使用 TypeScript 會是更好的選擇。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>combine</span><span class=p>(</span><span class=nx>val1</span><span class=p>,</span> <span class=nx>val2</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span>
    <span class=p>(</span><span class=k>typeof</span> <span class=nx>val1</span> <span class=o>===</span> <span class=s1>&#39;number&#39;</span> <span class=o>&amp;&amp;</span> <span class=k>typeof</span> <span class=nx>val2</span> <span class=o>===</span> <span class=s1>&#39;number&#39;</span><span class=p>)</span> <span class=o>||</span>
    <span class=p>(</span><span class=k>typeof</span> <span class=nx>val1</span> <span class=o>===</span> <span class=s1>&#39;string&#39;</span> <span class=o>&amp;&amp;</span> <span class=k>typeof</span> <span class=nx>val2</span> <span class=o>===</span> <span class=s1>&#39;string&#39;</span><span class=p>)</span>
  <span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>val1</span> <span class=o>+</span> <span class=nx>val2</span>
  <span class=p>}</span>

  <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Must be of type String or Number&#39;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>combine</span><span class=p>(</span><span class=nx>val1</span><span class=p>,</span> <span class=nx>val2</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>val1</span> <span class=o>+</span> <span class=nx>val2</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=別過度優化>別過度優化</h3><p>現代瀏覽器在運行時幫你做了很多優化。大多數的情況，你所做的優化都是在浪費你的時間。這裏有些很好的<a href=https://github.com/petkaantonov/bluebird/wiki/Optimization-killers>資源</a>，去了解哪些優化是無用的。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// 在舊的瀏覽器中並不會快取（cache）`list.length`，每次迭代（iteration）時的重新計算相當損耗效能。
</span><span class=c1>// 這在新瀏覽器中已被優化，你不用手動去快取。
</span><span class=c1></span><span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>len</span> <span class=o>=</span> <span class=nx>list</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>len</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>list</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>簡單來說，你不用在意程式語言層面上優化，因為這部分會因為版本更新而得到優化。但不要因此放棄所有的優化，演算法的優化才是你該注意的地方！</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=移除無用的程式碼-dead-code>移除無用的程式碼（Dead Code）</h3><p>沒有任何理由保留無用的程式碼，如果他們沒有被使用到，移除它！讓它們被保留在版本歷史中。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>oldRequestModule</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=kd>function</span> <span class=nx>newRequestModule</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>const</span> <span class=nx>req</span> <span class=o>=</span> <span class=nx>newRequestModule</span>
<span class=nx>inventoryTracker</span><span class=p>(</span><span class=s1>&#39;apples&#39;</span><span class=p>,</span> <span class=nx>req</span><span class=p>,</span> <span class=s1>&#39;www.inventory-awesome.io&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>newRequestModule</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>const</span> <span class=nx>req</span> <span class=o>=</span> <span class=nx>newRequestModule</span>
<span class=nx>inventoryTracker</span><span class=p>(</span><span class=s1>&#39;apples&#39;</span><span class=p>,</span> <span class=nx>req</span><span class=p>,</span> <span class=s1>&#39;www.inventory-awesome.io&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=物件-objects-與資料結構-data-structures>物件（Objects）與資料結構（Data Structures）</h2><h3 id=使用-getters-與-setters>使用 getters 與 setters</h3><p>使用 <code>getters</code> 與 <code>setters</code> 來存取物件中資料，會比單純使用屬性（property）來的好。因為：</p><ul><li>當你想要在取得物件屬性時做更多事情，你不用找出所有的程式碼修改。</li><li>透過 <code>set</code> 可以建立規則進行資料校驗。</li><li>封裝內部邏輯。</li><li>存取時增加日誌（logging）與錯誤處理（error handling）。</li><li>你可以延遲載入你的物件屬性，像是來自伺服器的資料。</li></ul><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>makeBankAccount</span><span class=p>()</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span>
  <span class=k>return</span> <span class=p>{</span>
    <span class=nx>balance</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>account</span> <span class=o>=</span> <span class=nx>makeBankAccount</span><span class=p>()</span>
<span class=nx>account</span><span class=p>.</span><span class=nx>balance</span> <span class=o>=</span> <span class=mi>100</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>makeBankAccount</span><span class=p>()</span> <span class=p>{</span>
  <span class=c1>// 私有變數
</span><span class=c1></span>  <span class=kd>let</span> <span class=nx>balance</span> <span class=o>=</span> <span class=mi>0</span>

  <span class=c1>// &#39;getter&#39;，經由下方的返回物件對外公開
</span><span class=c1></span>  <span class=kd>function</span> <span class=nx>getBalance</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>balance</span>
  <span class=p>}</span>

  <span class=c1>// &#39;setter&#39;，經由下方的返回物件對外公開
</span><span class=c1></span>  <span class=kd>function</span> <span class=nx>setBalance</span><span class=p>(</span><span class=nx>amount</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ... 更新前先進行驗證
</span><span class=c1></span>    <span class=nx>balance</span> <span class=o>=</span> <span class=nx>amount</span>
  <span class=p>}</span>

  <span class=k>return</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>    <span class=nx>getBalance</span><span class=p>,</span>
    <span class=nx>setBalance</span><span class=p>,</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>account</span> <span class=o>=</span> <span class=nx>makeBankAccount</span><span class=p>()</span>
<span class=nx>account</span><span class=p>.</span><span class=nx>setBalance</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=讓物件擁有私有成員-members>讓物件擁有私有成員（members）</h3><p>可以透過閉包（closures）來私有化參數（使用於 ES5 以下）。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>Employee</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span>
<span class=p>}</span>

<span class=nx>Employee</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>getName</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>getName</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>employee</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Employee</span><span class=p>(</span><span class=s1>&#39;John Doe&#39;</span><span class=p>)</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Employee name: </span><span class=si>${</span><span class=nx>employee</span><span class=p>.</span><span class=nx>getName</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span> <span class=c1>// Employee name: John Doe
</span><span class=c1></span><span class=k>delete</span> <span class=nx>employee</span><span class=p>.</span><span class=nx>name</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Employee name: </span><span class=si>${</span><span class=nx>employee</span><span class=p>.</span><span class=nx>getName</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span> <span class=c1>// Employee name: undefined
</span></code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>makeEmployee</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=p>{</span>
    <span class=nx>getName</span><span class=p>()</span> <span class=p>{</span>
      <span class=k>return</span> <span class=nx>name</span>
    <span class=p>},</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>employee</span> <span class=o>=</span> <span class=nx>makeEmployee</span><span class=p>(</span><span class=s1>&#39;John Doe&#39;</span><span class=p>)</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Employee name: </span><span class=si>${</span><span class=nx>employee</span><span class=p>.</span><span class=nx>getName</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span> <span class=c1>// Employee name: John Doe
</span><span class=c1></span><span class=k>delete</span> <span class=nx>employee</span><span class=p>.</span><span class=nx>name</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Employee name: </span><span class=si>${</span><span class=nx>employee</span><span class=p>.</span><span class=nx>getName</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span> <span class=c1>// Employee name: John Doe
</span></code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=類別-classes>類別（Classes）</h2><h3 id=類別語法偏好使用-es2015-es6-的類別更甚於-es5-函數>類別語法偏好使用 ES2015/ES6 的類別更甚於 ES5 函數</h3><p>ES5 的類別定義非常難以閱讀、繼承、建造與定義方法。假設你需要繼承（請注意你有可能不需要），偏好使用 ES2015/ES6 的類別。除非你需要大型且複雜的物件，不然使用小型函數會比類別更好。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>Animal</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=k>this</span> <span class=k>instanceof</span> <span class=nx>Animal</span><span class=p>))</span> <span class=p>{</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Instantiate Animal with `new`&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=nx>age</span>
<span class=p>}</span>

<span class=nx>Animal</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>move</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>move</span><span class=p>()</span> <span class=p>{}</span>

<span class=k>const</span> <span class=nx>Mammal</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>age</span><span class=p>,</span> <span class=nx>furColor</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=k>this</span> <span class=k>instanceof</span> <span class=nx>Mammal</span><span class=p>))</span> <span class=p>{</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Instantiate Mammal with `new`&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>Animal</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>furColor</span> <span class=o>=</span> <span class=nx>furColor</span>
<span class=p>}</span>

<span class=nx>Mammal</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>Animal</span><span class=p>.</span><span class=nx>prototype</span><span class=p>)</span>
<span class=nx>Mammal</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>Mammal</span>
<span class=nx>Mammal</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>liveBirth</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>liveBirth</span><span class=p>()</span> <span class=p>{}</span>

<span class=k>const</span> <span class=nx>Human</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>age</span><span class=p>,</span> <span class=nx>furColor</span><span class=p>,</span> <span class=nx>languageSpoken</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=k>this</span> <span class=k>instanceof</span> <span class=nx>Human</span><span class=p>))</span> <span class=p>{</span>
    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Instantiate Human with `new`&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>Mammal</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>age</span><span class=p>,</span> <span class=nx>furColor</span><span class=p>)</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>languageSpoken</span> <span class=o>=</span> <span class=nx>languageSpoken</span>
<span class=p>}</span>

<span class=nx>Human</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>Mammal</span><span class=p>.</span><span class=nx>prototype</span><span class=p>)</span>
<span class=nx>Human</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>Human</span>
<span class=nx>Human</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>speak</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>speak</span><span class=p>()</span> <span class=p>{}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Animal</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=nx>age</span>
  <span class=p>}</span>

  <span class=nx>move</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>Mammal</span> <span class=k>extends</span> <span class=nx>Animal</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>age</span><span class=p>,</span> <span class=nx>furColor</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>(</span><span class=nx>age</span><span class=p>)</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>furColor</span> <span class=o>=</span> <span class=nx>furColor</span>
  <span class=p>}</span>

  <span class=nx>liveBirth</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>Human</span> <span class=k>extends</span> <span class=nx>Mammal</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>age</span><span class=p>,</span> <span class=nx>furColor</span><span class=p>,</span> <span class=nx>languageSpoken</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>(</span><span class=nx>age</span><span class=p>,</span> <span class=nx>furColor</span><span class=p>)</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>languageSpoken</span> <span class=o>=</span> <span class=nx>languageSpoken</span>
  <span class=p>}</span>

  <span class=nx>speak</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=使用方法鏈-method-chaining>使用方法鏈（method chaining）</h3><p>這個模式（pattern）在 JavaScript 中非常有用，你可以在很多函數庫中看到，像是 jQuery 與 Lodash。它可以讓你的程式碼表達的更好。</p><p>基於這個原因，方法鏈可以讓你的程式碼看起來更加簡潔。在你的類別函數中，只需要回傳 <code>this</code> 在每一個函數中，你就可以鏈結所有類別中的方法。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Car</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>make</span><span class=p>,</span> <span class=nx>model</span><span class=p>,</span> <span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>make</span> <span class=o>=</span> <span class=nx>make</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>model</span> <span class=o>=</span> <span class=nx>model</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>color</span>
  <span class=p>}</span>

  <span class=nx>setMake</span><span class=p>(</span><span class=nx>make</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>make</span> <span class=o>=</span> <span class=nx>make</span>
  <span class=p>}</span>

  <span class=nx>setModel</span><span class=p>(</span><span class=nx>model</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>model</span> <span class=o>=</span> <span class=nx>model</span>
  <span class=p>}</span>

  <span class=nx>setColor</span><span class=p>(</span><span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>color</span>
  <span class=p>}</span>

  <span class=nx>save</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>make</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>model</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>color</span><span class=p>)</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>car</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Car</span><span class=p>(</span><span class=s1>&#39;Ford&#39;</span><span class=p>,</span> <span class=s1>&#39;F-150&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>)</span>
<span class=nx>car</span><span class=p>.</span><span class=nx>setColor</span><span class=p>(</span><span class=s1>&#39;pink&#39;</span><span class=p>)</span>
<span class=nx>car</span><span class=p>.</span><span class=nx>save</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Car</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>make</span><span class=p>,</span> <span class=nx>model</span><span class=p>,</span> <span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>make</span> <span class=o>=</span> <span class=nx>make</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>model</span> <span class=o>=</span> <span class=nx>model</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>color</span>
  <span class=p>}</span>

  <span class=nx>setMake</span><span class=p>(</span><span class=nx>make</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>make</span> <span class=o>=</span> <span class=nx>make</span>
    <span class=c1>// 注意：回傳 this 以鏈結
</span><span class=c1></span>    <span class=k>return</span> <span class=k>this</span>
  <span class=p>}</span>

  <span class=nx>setModel</span><span class=p>(</span><span class=nx>model</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>model</span> <span class=o>=</span> <span class=nx>model</span>
    <span class=c1>// 注意：回傳 this 以鏈結
</span><span class=c1></span>    <span class=k>return</span> <span class=k>this</span>
  <span class=p>}</span>

  <span class=nx>setColor</span><span class=p>(</span><span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>color</span>
    <span class=c1>// 注意：回傳 this 以鏈結
</span><span class=c1></span>    <span class=k>return</span> <span class=k>this</span>
  <span class=p>}</span>

  <span class=nx>save</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>make</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>model</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>color</span><span class=p>)</span>
    <span class=c1>// 注意：回傳 this 以鏈結
</span><span class=c1></span>    <span class=k>return</span> <span class=k>this</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>car</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Car</span><span class=p>(</span><span class=s1>&#39;Ford&#39;</span><span class=p>,</span> <span class=s1>&#39;F-150&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>).</span><span class=nx>setColor</span><span class=p>(</span><span class=s1>&#39;pink&#39;</span><span class=p>).</span><span class=nx>save</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=偏好組合-composition-更甚於繼承-inheritance>偏好組合（composition）更甚於繼承（inheritance）</h3><p>正如四人幫的<a href=https://en.wikipedia.org/wiki/Design_Patterns>設計模式</a>，可以的話你應該優先使用組合而不是繼承。有許多好理由去使用繼承或是組合。重點是，如果你主觀認定是繼承，嘗試想一下組合能否替問題帶來更好的解法。你應該偏好使用組合更甚於繼承。</p><p>什麼時候使用繼承？這取決於你手上的問題，不過這有一些不錯的參考，說明什麼什麼時候繼承比組合更好用：</p><ol><li>你的繼承為是一種（is-a）的關係，而不是有一個（has-a）。例如「人類是一種動物 Human -&gt; Animal」vs.「使用者有一個使用者資料 User -&gt; UserDetails」。</li><li>你能重複使用基類（base blasses）的程式碼。例如，人類能像動物一樣移動。</li><li>你希望能通過修改基類的程式碼來進行全域修改。例如，改變所有動物移動時的熱量消耗。</li></ol><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Employee</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>email</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>email</span> <span class=o>=</span> <span class=nx>email</span>
  <span class=p>}</span>

  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=c1>// 因為僱員有稅率金資料，而不是一種僱員
</span><span class=c1></span><span class=k>class</span> <span class=nx>EmployeeTaxData</span> <span class=k>extends</span> <span class=nx>Employee</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>ssn</span><span class=p>,</span> <span class=nx>salary</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>ssn</span> <span class=o>=</span> <span class=nx>ssn</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>salary</span> <span class=o>=</span> <span class=nx>salary</span>
  <span class=p>}</span>

  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>EmployeeTaxData</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>ssn</span><span class=p>,</span> <span class=nx>salary</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>ssn</span> <span class=o>=</span> <span class=nx>ssn</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>salary</span> <span class=o>=</span> <span class=nx>salary</span>
  <span class=p>}</span>

  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>

<span class=k>class</span> <span class=nx>Employee</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>email</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>email</span> <span class=o>=</span> <span class=nx>email</span>
  <span class=p>}</span>

  <span class=nx>setTaxData</span><span class=p>(</span><span class=nx>ssn</span><span class=p>,</span> <span class=nx>salary</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>taxData</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EmployeeTaxData</span><span class=p>(</span><span class=nx>ssn</span><span class=p>,</span> <span class=nx>salary</span><span class=p>)</span>
  <span class=p>}</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=物件導向基本原則-solid>物件導向基本原則（SOLID）</h2><h3 id=單一功能原則-single-responsibility-principle-srp>單一功能原則 Single Responsibility Principle (SRP)</h3><p>正如 Clean Code 所述：「永遠不要有超過一個理由來修改一個類型」。給一個類別塞滿許多功能，如同你在航班上只能帶一個行李箱一樣。這樣做的問題是，你的類別不會有理想的內聚性，將會有太多理由來對它進行修改。最小化需要修改一個類別的次數很重要，因為一個類別有太多的功能的話，一旦你修改一小部分，將會很難弄清楚它會對程式碼的其他模組造成什麼影響。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>UserSettings</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span>
  <span class=p>}</span>

  <span class=nx>changeSettings</span><span class=p>(</span><span class=nx>settings</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>verifyCredentials</span><span class=p>())</span> <span class=p>{</span>
      <span class=c1>// ...
</span><span class=c1></span>    <span class=p>}</span>
  <span class=p>}</span>

  <span class=nx>verifyCredentials</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>UserAuth</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span>
  <span class=p>}</span>

  <span class=nx>verifyCredentials</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>UserSettings</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>auth</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>UserAuth</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>changeSettings</span><span class=p>(</span><span class=nx>settings</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>auth</span><span class=p>.</span><span class=nx>verifyCredentials</span><span class=p>())</span> <span class=p>{</span>
      <span class=c1>// ...
</span><span class=c1></span>    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=開閉原則-open-closed-principle-ocp>開閉原則 Open/Closed Principle (OCP)</h3><p>Bertrand Meyer 說過，「軟體實體（類別、模組、函數）應為開放擴展，但是關閉修改」。這原則基本上說明你應該同意使用者增加功能，而不用修改現有程式碼。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>AjaxAdapter</span> <span class=k>extends</span> <span class=nx>Adapter</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;ajaxAdapter&#39;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>NodeAdapter</span> <span class=k>extends</span> <span class=nx>Adapter</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;nodeAdapter&#39;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>HttpRequester</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>adapter</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>adapter</span> <span class=o>=</span> <span class=nx>adapter</span>
  <span class=p>}</span>

  <span class=nx>fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>adapter</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;ajaxAdapter&#39;</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>return</span> <span class=nx>makeAjaxCall</span><span class=p>(</span><span class=nx>url</span><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
        <span class=c1>// 轉換回應並回傳
</span><span class=c1></span>      <span class=p>})</span>
    <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>adapter</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;nodeAdapter&#39;</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>return</span> <span class=nx>makeHttpCall</span><span class=p>(</span><span class=nx>url</span><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
        <span class=c1>// 轉換回應並回傳
</span><span class=c1></span>      <span class=p>})</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>makeAjaxCall</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// 發送請求並回傳 promise
</span><span class=c1></span><span class=p>}</span>

<span class=kd>function</span> <span class=nx>makeHttpCall</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// 發送請求並回傳 promise
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>AjaxAdapter</span> <span class=k>extends</span> <span class=nx>Adapter</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;ajaxAdapter&#39;</span>
  <span class=p>}</span>

  <span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// 發送請求並回傳 promise
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>NodeAdapter</span> <span class=k>extends</span> <span class=nx>Adapter</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;nodeAdapter&#39;</span>
  <span class=p>}</span>

  <span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// 發送請求並回傳 promise
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>HttpRequester</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>adapter</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>adapter</span> <span class=o>=</span> <span class=nx>adapter</span>
  <span class=p>}</span>

  <span class=nx>fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>adapter</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
      <span class=c1>// transform response and return
</span><span class=c1></span>    <span class=p>})</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=里氏替換原則-liskov-substitution-principle-lsp>里氏替換原則 Liskov Substitution Principle (LSP)</h3><p>這是一個驚人但簡單的概念，正式的定義為：「假如類別 S 是類別 T 的子類別，那麼類別 T 的物件（Object）可以被替換成類別 S 的物件（例如，類別 S 的物件可作為類別 T 的物件的替代品），而不需要改變任何程式的屬性（正確性、被執行的任務等）。</p><p>最好的解釋是這樣，假如你有父類別與子類別，父類別與子類別可以互換，而沒有問題發生。讓我們看看一個經典的正方形與長方形的案例。在數學上，正方形是長方形的一種，但如果你使用是一種（is-a）的關係用繼承來實現，你很快會發現問題。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Rectangle</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>height</span> <span class=o>=</span> <span class=mi>0</span>
  <span class=p>}</span>

  <span class=nx>setColor</span><span class=p>(</span><span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>

  <span class=nx>render</span><span class=p>(</span><span class=nx>area</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>

  <span class=nx>setWidth</span><span class=p>(</span><span class=nx>width</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>=</span> <span class=nx>width</span>
  <span class=p>}</span>

  <span class=nx>setHeight</span><span class=p>(</span><span class=nx>height</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>height</span> <span class=o>=</span> <span class=nx>height</span>
  <span class=p>}</span>

  <span class=nx>getArea</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=k>this</span><span class=p>.</span><span class=nx>height</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>Square</span> <span class=k>extends</span> <span class=nx>Rectangle</span> <span class=p>{</span>
  <span class=nx>setWidth</span><span class=p>(</span><span class=nx>width</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>=</span> <span class=nx>width</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>height</span> <span class=o>=</span> <span class=nx>width</span>
  <span class=p>}</span>

  <span class=nx>setHeight</span><span class=p>(</span><span class=nx>height</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>=</span> <span class=nx>height</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>height</span> <span class=o>=</span> <span class=nx>height</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>renderLargeRectangles</span><span class=p>(</span><span class=nx>rectangles</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>rectangles</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>rectangle</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>rectangle</span><span class=p>.</span><span class=nx>setWidth</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
    <span class=nx>rectangle</span><span class=p>.</span><span class=nx>setHeight</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
    <span class=k>const</span> <span class=nx>area</span> <span class=o>=</span> <span class=nx>rectangle</span><span class=p>.</span><span class=nx>getArea</span><span class=p>()</span> <span class=c1>// 糟糕：結果為 25，應該為 20 才正確
</span><span class=c1></span>    <span class=nx>rectangle</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=nx>area</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>rectangles</span> <span class=o>=</span> <span class=p>[</span><span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(),</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(),</span> <span class=k>new</span> <span class=nx>Square</span><span class=p>()]</span>
<span class=nx>renderLargeRectangles</span><span class=p>(</span><span class=nx>rectangles</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>Shape</span> <span class=p>{</span>
  <span class=nx>setColor</span><span class=p>(</span><span class=nx>color</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>

  <span class=nx>render</span><span class=p>(</span><span class=nx>area</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>Rectangle</span> <span class=k>extends</span> <span class=nx>Shape</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>width</span><span class=p>,</span> <span class=nx>height</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>=</span> <span class=nx>width</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>height</span> <span class=o>=</span> <span class=nx>height</span>
  <span class=p>}</span>

  <span class=nx>getArea</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=k>this</span><span class=p>.</span><span class=nx>height</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>Square</span> <span class=k>extends</span> <span class=nx>Shape</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>length</span> <span class=o>=</span> <span class=nx>length</span>
  <span class=p>}</span>

  <span class=nx>getArea</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>length</span> <span class=o>*</span> <span class=k>this</span><span class=p>.</span><span class=nx>length</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>renderLargeShapes</span><span class=p>(</span><span class=nx>shapes</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>shapes</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>shape</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>area</span> <span class=o>=</span> <span class=nx>shape</span><span class=p>.</span><span class=nx>getArea</span><span class=p>()</span>
    <span class=nx>shape</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=nx>area</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>shapes</span> <span class=o>=</span> <span class=p>[</span><span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span> <span class=k>new</span> <span class=nx>Rectangle</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span> <span class=k>new</span> <span class=nx>Square</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>
<span class=nx>renderLargeShapes</span><span class=p>(</span><span class=nx>shapes</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p><code>setWidth</code> 與 <code>setHeight</code> 方法無法被繼承，使用上的不一致，更造成了結果錯誤。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=介面隔離原則-interface-segregation-principle-isp>介面隔離原則 Interface Segregation Principle (ISP)</h3><p>JavaScript 沒有介面（interfaces），所以這個原則比較不像其他語言一樣嚴格。不過它在 JavaScript 這種缺少類型的語言來說一樣重要。</p><p>ISP 原則是「客戶端不應該被強制依賴他們不需要的介面。」因為 JavaScript 是一種弱型別的語言，所以介面是一種隱式（implicit）的協議。</p><p>巨大的設定物件（objects）是這個原則的好範例，不需要客戶去設定大量的選項是有好處的，因為多數的情況下，他們不需要全部的設定。讓他們可以被選擇，可以防止出現一個過胖的介面。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>DOMTraverser</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>settings</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>settings</span> <span class=o>=</span> <span class=nx>settings</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>setup</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>setup</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>rootNode</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>settings</span><span class=p>.</span><span class=nx>rootNode</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>animationModule</span><span class=p>.</span><span class=nx>setup</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>traverse</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>$</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DOMTraverser</span><span class=p>({</span>
  <span class=nx>rootNode</span><span class=o>:</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;body&#39;</span><span class=p>),</span>
  <span class=nx>animationModule</span><span class=p>()</span> <span class=p>{},</span> <span class=c1>// 大多數的情況下，執行 traverse 時，我們其實不需要使用 animation。
</span><span class=c1></span>  <span class=c1>// ...
</span><span class=c1></span><span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>DOMTraverser</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>settings</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>settings</span> <span class=o>=</span> <span class=nx>settings</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>options</span> <span class=o>=</span> <span class=nx>settings</span><span class=p>.</span><span class=nx>options</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>setup</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>setup</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>rootNode</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>settings</span><span class=p>.</span><span class=nx>rootNode</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>setupOptions</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>setupOptions</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>options</span><span class=p>.</span><span class=nx>animationModule</span><span class=p>)</span> <span class=p>{</span>
      <span class=c1>// ...
</span><span class=c1></span>    <span class=p>}</span>
  <span class=p>}</span>

  <span class=nx>traverse</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>$</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DOMTraverser</span><span class=p>({</span>
  <span class=nx>rootNode</span><span class=o>:</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;body&#39;</span><span class=p>),</span>
  <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
    <span class=c1>// animationModule 可被選擇要不要使用
</span><span class=c1></span>    <span class=nx>animationModule</span><span class=p>()</span> <span class=p>{},</span>
  <span class=p>},</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=依賴反轉原則-dependency-inversion-principle-dip>依賴反轉原則 Dependency Inversion Principle (DIP)</h3><p>這原則說明兩個必要事情：</p><ol><li>高層級的模組（modules）不應該依賴於低層級的模組。它們兩者必須依賴於抽象。</li><li>抽象（abstract）不應該依賴於具體實現（implement），具體實現則需要應依賴於抽象。</li></ol><p>這原則一開始很難理解，但如果你使用過 AngularJS，你應該已經知道，使用依賴注入（Dependency Injection）來實現這個原則。雖然不是同一種概念，但透過依賴注入讓高層級模組遠離低層級模組的細節與設定。這樣做的巨大好處是，降低模組間的耦合。耦合是很糟的開發模式，因為會導致程式碼難以重構（refactor）。</p><p>如上所示，JavaScript 沒有介面，所以被依賴的抽象是隱式協議。也是就說，一個物件/類別的屬性直接暴露給另外一個。在以下的範例中，任何的請求模組（Request Module）的隱式協議 <code>InventoryTracker</code> 都會有一個 <code>requestItems</code> 的方法。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>InventoryRequester</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>REQ_METHODS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;HTTP&#39;</span><span class=p>]</span>
  <span class=p>}</span>

  <span class=nx>requestItem</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>InventoryTracker</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>items</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>items</span> <span class=o>=</span> <span class=nx>items</span>

    <span class=c1>// 糟糕的：我們建立了一種依賴，依賴於特定（InventoryRequester）請求模組的實現。
</span><span class=c1></span>    <span class=c1>// 我們實際上只有 `requestItems` 方法依賴於名為 `request` 的請求方法。
</span><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>requester</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InventoryRequester</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>requestItems</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>requester</span><span class=p>.</span><span class=nx>requestItem</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span>
    <span class=p>})</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>inventoryTracker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InventoryTracker</span><span class=p>([</span><span class=s1>&#39;apples&#39;</span><span class=p>,</span> <span class=s1>&#39;bananas&#39;</span><span class=p>])</span>
<span class=nx>inventoryTracker</span><span class=p>.</span><span class=nx>requestItems</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>InventoryTracker</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>items</span><span class=p>,</span> <span class=nx>requester</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>items</span> <span class=o>=</span> <span class=nx>items</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>requester</span> <span class=o>=</span> <span class=nx>requester</span>
  <span class=p>}</span>

  <span class=nx>requestItems</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
      <span class=k>this</span><span class=p>.</span><span class=nx>requester</span><span class=p>.</span><span class=nx>requestItem</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span>
    <span class=p>})</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>InventoryRequesterV1</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>REQ_METHODS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;HTTP&#39;</span><span class=p>]</span>
  <span class=p>}</span>

  <span class=nx>requestItem</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nx>InventoryRequesterV2</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>REQ_METHODS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;WS&#39;</span><span class=p>]</span>
  <span class=p>}</span>

  <span class=nx>requestItem</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 通過外部創建時將依賴注入，我們可以輕鬆地用全新的 WebSockets 的請求模組替換。
</span><span class=c1></span><span class=k>const</span> <span class=nx>inventoryTracker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InventoryTracker</span><span class=p>(</span>
  <span class=p>[</span><span class=s1>&#39;apples&#39;</span><span class=p>,</span> <span class=s1>&#39;bananas&#39;</span><span class=p>],</span>
  <span class=k>new</span> <span class=nx>InventoryRequesterV2</span><span class=p>()</span>
<span class=p>)</span>
<span class=nx>inventoryTracker</span><span class=p>.</span><span class=nx>requestItems</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>在糟糕的案例中，<code>InventoryTracker</code> 沒有提供替換請求模組的可能，<code>InventoryTracker</code> 依賴於 <code>InventoryRequester</code>。造成耦合，測試將會被難以撰寫，修改程式碼時將會牽一髮而動全身。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=測試-testing>測試（Testing）</h2><p>測試比發布更加重要。當發布時，如果你沒有測試或是測試不夠充分，你會無法確認有沒有任何功能被破壞。測試的量，由團隊決定，但是擁有 100% 的測試覆蓋率（包含狀態與分支），是你為什麼能有高度自信與內心平靜的原因。所以你需要一個偉大的測試框架，也需要一個<a href=http://gotwarlost.github.io/istanbul/>好的覆蓋率（coverage）工具</a>。</p><p>沒有任何藉口不寫測試。這裡有很多<a href=http://jstherightway.org/#testing-tools>好的 JS 測試框架</a>，選一個你的團隊喜歡的。選擇好之後，接下來的目標是為任何新功能或是模組撰寫測試。如果你喜好<a href=https://en.wikipedia.org/wiki/Test-driven_development>測試驅動開發（Test Driven Development）</a>的方式，那就太棒了，重點是確保上線前或是重構之前，達到足夠的覆蓋率。</p><p><strong>譯者附註</strong></p><p>測試是一種保障，當你趕著修正錯誤時，測試會告訴你會不會改了 A 壞了 B。確保每次上線前的功能皆可正常運作。另外測試有分種類，詳情見連結<a href=https://en.wikipedia.org/wiki/Software_testing>測試的種類</a>。</p><h3 id=每個測試只測試一個概念>每個測試只測試一個概念</h3><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>import</span> <span class=nx>assert</span> <span class=nx>from</span> <span class=s1>&#39;assert&#39;</span>

<span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;MakeMomentJSGreatAgain&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;handles date boundaries&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=kd>let</span> <span class=nx>date</span>

    <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MakeMomentJSGreatAgain</span><span class=p>(</span><span class=s1>&#39;1/1/2015&#39;</span><span class=p>)</span>
    <span class=nx>date</span><span class=p>.</span><span class=nx>addDays</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
    <span class=nx>assert</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=s1>&#39;1/31/2015&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>

    <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MakeMomentJSGreatAgain</span><span class=p>(</span><span class=s1>&#39;2/1/2016&#39;</span><span class=p>)</span>
    <span class=nx>date</span><span class=p>.</span><span class=nx>addDays</span><span class=p>(</span><span class=mi>28</span><span class=p>)</span>
    <span class=nx>assert</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=s1>&#39;02/29/2016&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>

    <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MakeMomentJSGreatAgain</span><span class=p>(</span><span class=s1>&#39;2/1/2015&#39;</span><span class=p>)</span>
    <span class=nx>date</span><span class=p>.</span><span class=nx>addDays</span><span class=p>(</span><span class=mi>28</span><span class=p>)</span>
    <span class=nx>assert</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=s1>&#39;03/01/2015&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>import</span> <span class=nx>assert</span> <span class=nx>from</span> <span class=s1>&#39;assert&#39;</span>

<span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;MakeMomentJSGreatAgain&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;handles 30-day months&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MakeMomentJSGreatAgain</span><span class=p>(</span><span class=s1>&#39;1/1/2015&#39;</span><span class=p>)</span>
    <span class=nx>date</span><span class=p>.</span><span class=nx>addDays</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
    <span class=nx>assert</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=s1>&#39;1/31/2015&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>
  <span class=p>})</span>

  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;handles leap year&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MakeMomentJSGreatAgain</span><span class=p>(</span><span class=s1>&#39;2/1/2016&#39;</span><span class=p>)</span>
    <span class=nx>date</span><span class=p>.</span><span class=nx>addDays</span><span class=p>(</span><span class=mi>28</span><span class=p>)</span>
    <span class=nx>assert</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=s1>&#39;02/29/2016&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>
  <span class=p>})</span>

  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;handles non-leap year&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MakeMomentJSGreatAgain</span><span class=p>(</span><span class=s1>&#39;2/1/2015&#39;</span><span class=p>)</span>
    <span class=nx>date</span><span class=p>.</span><span class=nx>addDays</span><span class=p>(</span><span class=mi>28</span><span class=p>)</span>
    <span class=nx>assert</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=s1>&#39;03/01/2015&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>
  <span class=p>})</span>
<span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>如果你單個測試，測試過多的功能或是概念，當這個測試出錯的時候，你將會難以找到出錯的程式碼。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=並發-concurrency>並發（Concurrency）</h2><h3 id=使用-promises-不要使用回呼函式-callback>使用 Promises，不要使用回呼函式（callback）</h3><p>回呼函式不怎麼簡潔，他們會導致過多的巢狀。在 ES2016/ES6，Promises 已經是內建的全局類型（global type）。使用它們吧！</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>import</span> <span class=p>{</span> <span class=nx>get</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;request&#39;</span>
<span class=k>import</span> <span class=p>{</span> <span class=nx>writeFile</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;fs&#39;</span>

<span class=nx>get</span><span class=p>(</span>
  <span class=s1>&#39;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#39;</span><span class=p>,</span>
  <span class=p>(</span><span class=nx>requestErr</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>requestErr</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>requestErr</span><span class=p>)</span>
    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
      <span class=nx>writeFile</span><span class=p>(</span><span class=s1>&#39;article.html&#39;</span><span class=p>,</span> <span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>,</span> <span class=p>(</span><span class=nx>writeErr</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>writeErr</span><span class=p>)</span> <span class=p>{</span>
          <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>writeErr</span><span class=p>)</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
          <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;File written&#39;</span><span class=p>)</span>
        <span class=p>}</span>
      <span class=p>})</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>)</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>import</span> <span class=p>{</span> <span class=nx>get</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;request&#39;</span>
<span class=k>import</span> <span class=p>{</span> <span class=nx>writeFile</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;fs&#39;</span>

<span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#39;</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>writeFile</span><span class=p>(</span><span class=s1>&#39;article.html&#39;</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span>
  <span class=p>})</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;File written&#39;</span><span class=p>)</span>
  <span class=p>})</span>
  <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
  <span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=async-await-比-promises-更加簡潔>Async/Await 比 Promises 更加簡潔</h3><p>Promises 是回呼函式的一種非常簡潔的替代品，但是 ES2017/ES8 帶來了 async 與 await，提供了一個更簡潔的方案。你需要的只是一個前綴為 <code>async</code> 關鍵字的函數，接下來你編寫邏輯時就不需要使用 <code>then</code> 函數鍊。如果你能使用 ES2017/ES8 的進階功能的話，今天就使用它吧！</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>import</span> <span class=p>{</span> <span class=nx>get</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;request-promise&#39;</span>
<span class=k>import</span> <span class=p>{</span> <span class=nx>writeFile</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;fs-promise&#39;</span>

<span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#39;</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>writeFile</span><span class=p>(</span><span class=s1>&#39;article.html&#39;</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span>
  <span class=p>})</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;File written&#39;</span><span class=p>)</span>
  <span class=p>})</span>
  <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
  <span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>import</span> <span class=p>{</span> <span class=nx>get</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;request-promise&#39;</span>
<span class=k>import</span> <span class=p>{</span> <span class=nx>writeFile</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;fs-promise&#39;</span>

<span class=kr>async</span> <span class=kd>function</span> <span class=nx>getCleanCodeArticle</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>try</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>get</span><span class=p>(</span>
      <span class=s1>&#39;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#39;</span>
    <span class=p>)</span>
    <span class=kr>await</span> <span class=nx>writeFile</span><span class=p>(</span><span class=s1>&#39;article.html&#39;</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;File written&#39;</span><span class=p>)</span>
  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=錯誤處理-error-handling>錯誤處理（Error Handling）</h2><p>拋出錯誤是一件好事情！代表運行時可以成功辨識程式中的錯誤，通過停止執行目前堆疊（stack）上的執行函數，結束（Node.js 中的）目前程序（process），並在控制台中用一個堆疊追蹤（stack trace）提醒你。</p><h3 id=不要忽略捕捉到的錯誤>不要忽略捕捉到的錯誤</h3><p>捕捉到一個錯誤時而不做任何處理，會讓你失去修復或是反應錯誤的能力。將錯誤紀錄於控制台（<code>console.log</code>）也不怎麼好，因為你往往會迷失在控制台大量的記錄之中。如果你使用 <code>try/catch</code> 包住程式碼，代表你預期這裡可能會出錯，因此當錯誤發生時你必須要有個處理方法。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>try</span> <span class=p>{</span>
  <span class=nx>functionThatMightThrow</span><span class=p>()</span>
<span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>try</span> <span class=p>{</span>
  <span class=nx>functionThatMightThrow</span><span class=p>()</span>
<span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// 可以這樣（會比 console.log 更吵）
</span><span class=c1></span>  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
  <span class=c1>// 或這種方法
</span><span class=c1></span>  <span class=nx>notifyUserOfError</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
  <span class=c1>// 另外一種方法
</span><span class=c1></span>  <span class=nx>reportErrorToService</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
  <span class=c1>// 或是全部都做！
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=不要忽略被拒絕的-promises>不要忽略被拒絕的 Promises</h3><p>原因如上節所述，不要忽略任何捕捉到的錯誤。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>getdata</span><span class=p>()</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>data</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>functionThatMightThrow</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
  <span class=p>})</span>
  <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
  <span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>getdata</span><span class=p>()</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>data</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>functionThatMightThrow</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
  <span class=p>})</span>
  <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=c1>// 可以這樣（會比 console.log 更吵）
</span><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
    <span class=c1>// 或這種方法
</span><span class=c1></span>    <span class=nx>notifyUserOfError</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
    <span class=c1>// 另外一種方法
</span><span class=c1></span>    <span class=nx>reportErrorToService</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
    <span class=c1>// 或是全部都做！
</span><span class=c1></span>  <span class=p>})</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=格式化-formatting>格式化（Formatting）</h2><p>格式化是很主觀的，就像其他規則一樣沒有硬性規定，沒有必要為了格式而爭論，這裡有<a href=https://standardjs.com/rules.html>大量的自動化格式工具</a>，選一個就是了！對工程師來說，爭論格式就是在浪費時間與金錢。</p><p>針對自動格式化工具不能涵蓋的問題，這裡有一些指南。</p><h3 id=使用一致的大小寫>使用一致的大小寫</h3><p>JavaScript 是無型別的，所以從大小寫可以看出關於變數、函數等很多的事情。這些規則是很主觀的，所以你的團隊可以自由選擇。重點是，不管選了去什麼，就保持一致。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>DAYS_IN_WEEK</span> <span class=o>=</span> <span class=mi>7</span>
<span class=k>const</span> <span class=nx>daysInMonth</span> <span class=o>=</span> <span class=mi>30</span>

<span class=k>const</span> <span class=nx>songs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Back In Black&#39;</span><span class=p>,</span> <span class=s1>&#39;Stairway to Heaven&#39;</span><span class=p>,</span> <span class=s1>&#39;Hey Jude&#39;</span><span class=p>]</span>
<span class=k>const</span> <span class=nx>Artists</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;ACDC&#39;</span><span class=p>,</span> <span class=s1>&#39;Led Zeppelin&#39;</span><span class=p>,</span> <span class=s1>&#39;The Beatles&#39;</span><span class=p>]</span>

<span class=kd>function</span> <span class=nx>eraseDatabase</span><span class=p>()</span> <span class=p>{}</span>
<span class=kd>function</span> <span class=nx>restore_database</span><span class=p>()</span> <span class=p>{}</span>

<span class=k>class</span> <span class=nx>animal</span> <span class=p>{}</span>
<span class=k>class</span> <span class=nx>Alpaca</span> <span class=p>{}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>const</span> <span class=nx>DAYS_IN_WEEK</span> <span class=o>=</span> <span class=mi>7</span>
<span class=k>const</span> <span class=nx>DAYS_IN_MONTH</span> <span class=o>=</span> <span class=mi>30</span>

<span class=k>const</span> <span class=nx>SONGS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Back In Black&#39;</span><span class=p>,</span> <span class=s1>&#39;Stairway to Heaven&#39;</span><span class=p>,</span> <span class=s1>&#39;Hey Jude&#39;</span><span class=p>]</span>
<span class=k>const</span> <span class=nx>ARTISTS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;ACDC&#39;</span><span class=p>,</span> <span class=s1>&#39;Led Zeppelin&#39;</span><span class=p>,</span> <span class=s1>&#39;The Beatles&#39;</span><span class=p>]</span>

<span class=kd>function</span> <span class=nx>eraseDatabase</span><span class=p>()</span> <span class=p>{}</span>
<span class=kd>function</span> <span class=nx>restoreDatabase</span><span class=p>()</span> <span class=p>{}</span>

<span class=k>class</span> <span class=nx>Animal</span> <span class=p>{}</span>
<span class=k>class</span> <span class=nx>Alpaca</span> <span class=p>{}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=函數的呼叫者應該與被呼叫者靠近>函數的呼叫者應該與被呼叫者靠近</h3><p>如果一個函數呼叫另外一個，在程式碼中兩個函數的垂直位置應該靠近。理想情況下，呼叫函數應於被呼叫函數的正上方。我們傾向於從上到下的閱讀方式，就像看報紙一樣。基於這個原因，讓你的程式碼可以依照這種方式閱讀。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>PerformanceReview</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>employee</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>employee</span> <span class=o>=</span> <span class=nx>employee</span>
  <span class=p>}</span>

  <span class=nx>lookupPeers</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>lookup</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>employee</span><span class=p>,</span> <span class=s1>&#39;peers&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>lookupManager</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>lookup</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>employee</span><span class=p>,</span> <span class=s1>&#39;manager&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>getPeerReviews</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>peers</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>lookupPeers</span><span class=p>()</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>

  <span class=nx>perfReview</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>getPeerReviews</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>getManagerReview</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>getSelfReview</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>getManagerReview</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>manager</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>lookupManager</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>getSelfReview</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>review</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PerformanceReview</span><span class=p>(</span><span class=nx>employee</span><span class=p>)</span>
<span class=nx>review</span><span class=p>.</span><span class=nx>perfReview</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=k>class</span> <span class=nx>PerformanceReview</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>employee</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>employee</span> <span class=o>=</span> <span class=nx>employee</span>
  <span class=p>}</span>

  <span class=nx>perfReview</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>getPeerReviews</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>getManagerReview</span><span class=p>()</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>getSelfReview</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>getPeerReviews</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>peers</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>lookupPeers</span><span class=p>()</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>

  <span class=nx>lookupPeers</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>lookup</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>employee</span><span class=p>,</span> <span class=s1>&#39;peers&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>getManagerReview</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>const</span> <span class=nx>manager</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>lookupManager</span><span class=p>()</span>
  <span class=p>}</span>

  <span class=nx>lookupManager</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>lookup</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>employee</span><span class=p>,</span> <span class=s1>&#39;manager&#39;</span><span class=p>)</span>
  <span class=p>}</span>

  <span class=nx>getSelfReview</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// ...
</span><span class=c1></span>  <span class=p>}</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>review</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PerformanceReview</span><span class=p>(</span><span class=nx>employee</span><span class=p>)</span>
<span class=nx>review</span><span class=p>.</span><span class=nx>perfReview</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=註解-comments>註解（Comments）</h2><h3 id=只對商業邏輯複雜的部分撰寫註解>只對商業邏輯複雜的部分撰寫註解</h3><p>註解是代表的辯解，而不是要求。多數情況下，好的程式碼本身就是文件。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>hashIt</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// The hash
</span><span class=c1></span>  <span class=kd>let</span> <span class=nx>hash</span> <span class=o>=</span> <span class=mi>0</span>

  <span class=c1>// Length of string
</span><span class=c1></span>  <span class=k>const</span> <span class=nx>length</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>length</span>

  <span class=c1>// Loop through every character in data
</span><span class=c1></span>  <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// Get character code.
</span><span class=c1></span>    <span class=k>const</span> <span class=kr>char</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
    <span class=c1>// Make the hash
</span><span class=c1></span>    <span class=nx>hash</span> <span class=o>=</span> <span class=p>(</span><span class=nx>hash</span> <span class=o>&lt;&lt;</span> <span class=mi>5</span><span class=p>)</span> <span class=o>-</span> <span class=nx>hash</span> <span class=o>+</span> <span class=kr>char</span>
    <span class=c1>// Convert to 32-bit integer
</span><span class=c1></span>    <span class=nx>hash</span> <span class=o>&amp;=</span> <span class=nx>hash</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>hashIt</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>hash</span> <span class=o>=</span> <span class=mi>0</span>
  <span class=k>const</span> <span class=nx>length</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>length</span>

  <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>const</span> <span class=kr>char</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
    <span class=nx>hash</span> <span class=o>=</span> <span class=p>(</span><span class=nx>hash</span> <span class=o>&lt;&lt;</span> <span class=mi>5</span><span class=p>)</span> <span class=o>-</span> <span class=nx>hash</span> <span class=o>+</span> <span class=kr>char</span>

    <span class=c1>// Convert to 32-bit integer
</span><span class=c1></span>    <span class=nx>hash</span> <span class=o>&amp;=</span> <span class=nx>hash</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=不要在程式碼中保留被註解掉的程式碼>不要在程式碼中保留被註解掉的程式碼</h3><p>有了版本控制，舊的程式碼留在歷史紀錄中就好。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>doStuff</span><span class=p>()</span>
<span class=c1>// doOtherStuff();
</span><span class=c1>// doSomeMoreStuff();
</span><span class=c1>// doSoMuchStuff();
</span></code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>doStuff</span><span class=p>()</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=不要留有日誌式的註解>不要留有日誌式的註解</h3><p>記住，使用版本控制！不需要無用的、註解掉的程式碼，尤其是日誌式的註解。使用 <code>git log</code> 來保存歷史紀錄。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=cm>/**
</span><span class=cm> * 2016-12-20: Removed monads, didn&#39;t understand them (RM)
</span><span class=cm> * 2016-10-01: Improved using special monads (JP)
</span><span class=cm> * 2016-02-03: Removed type-checking (LI)
</span><span class=cm> * 2015-03-14: Added combine with type-checking (JR)
</span><span class=cm> */</span>
<span class=kd>function</span> <span class=nx>combine</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kd>function</span> <span class=nx>combine</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>譯者附註</strong></p><p>在註解中寫歷史紀錄並沒有在版本控制中來得有效，另外補充有關歷史紀錄如何撰寫的規範（<a href=https://chris.beams.io/posts/git-commit/>如何撰寫 Git Commit Message</a>）。</p><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h3 id=避免位置標示>避免位置標示</h3><p>它們只會增加干擾。讓函數與變數的名稱沿著合適的縮排與格式化，為你的程式碼帶來良好的視覺結構。</p><p><strong>糟糕的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>////////////////////////////////////////////////////////////////////////////////
</span><span class=c1>// Scope Model Instantiation
</span><span class=c1>////////////////////////////////////////////////////////////////////////////////
</span><span class=c1></span><span class=nx>$scope</span><span class=p>.</span><span class=nx>model</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>menu</span><span class=o>:</span> <span class=s1>&#39;foo&#39;</span><span class=p>,</span>
  <span class=nx>nav</span><span class=o>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>,</span>
<span class=p>}</span>

<span class=c1>////////////////////////////////////////////////////////////////////////////////
</span><span class=c1>// Action setup
</span><span class=c1>////////////////////////////////////////////////////////////////////////////////
</span><span class=c1></span><span class=k>const</span> <span class=nx>actions</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>適當的：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>$scope</span><span class=p>.</span><span class=nx>model</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>menu</span><span class=o>:</span> <span class=s1>&#39;foo&#39;</span><span class=p>,</span>
  <span class=nx>nav</span><span class=o>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>,</span>
<span class=p>}</span>

<span class=k>const</span> <span class=nx>actions</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
  <span class=c1>// ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p><h2 id=翻譯-translation>翻譯（Translation）</h2><p>以下為所有的翻譯版本。</p><ul><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/France.png alt=fr> <strong>French</strong>:
<a href=https://github.com/GavBaros/clean-code-javascript-fr>GavBaros/clean-code-javascript-fr</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Brazil.png alt=br> <strong>Brazilian Portuguese</strong>: <a href=https://github.com/fesnt/clean-code-javascript>fesnt/clean-code-javascript</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Uruguay.png alt=es> <strong>Spanish</strong>: <a href=https://github.com/andersontr15/clean-code-javascript-es>andersontr15/clean-code-javascript</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Spain.png alt=es> <strong>Spanish</strong>: <a href=https://github.com/tureey/clean-code-javascript>tureey/clean-code-javascript</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/China.png alt=cn> <strong>Simplified Chinese</strong>:<ul><li><a href=https://github.com/alivebao/clean-code-js>alivebao/clean-code-js</a></li><li><a href=https://github.com/beginor/clean-code-javascript>beginor/clean-code-javascript</a></li></ul></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Taiwan.png alt=tw> <strong>Traditional Chinese</strong>: <a href=https://github.com/AllJointTW/clean-code-javascript>AllJointTW/clean-code-javascript</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Germany.png alt=de> <strong>German</strong>: <a href=https://github.com/marcbruederlin/clean-code-javascript>marcbruederlin/clean-code-javascript</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/South-Korea.png alt=kr> <strong>Korean</strong>: <a href=https://github.com/qkraudghgh/clean-code-javascript-ko>qkraudghgh/clean-code-javascript-ko</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Poland.png alt=pl> <strong>Polish</strong>: <a href=https://github.com/greg-dev/clean-code-javascript-pl>greg-dev/clean-code-javascript-pl</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Russia.png alt=ru> <strong>Russian</strong>:<ul><li><a href=https://github.com/BoryaMogila/clean-code-javascript-ru/>BoryaMogila/clean-code-javascript-ru/</a></li><li><a href=https://github.com/maksugr/clean-code-javascript>maksugr/clean-code-javascript</a></li></ul></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Vietnam.png alt=vi> <strong>Vietnamese</strong>: <a href=https://github.com/hienvd/clean-code-javascript/>hienvd/clean-code-javascript/</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Japan.png alt=ja> <strong>Japanese</strong>: <a href=https://github.com/mitsuruog/clean-code-javascript/>mitsuruog/clean-code-javascript/</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Indonesia.png alt=id> <strong>Indonesia</strong>:
<a href=https://github.com/andirkh/clean-code-javascript/>andirkh/clean-code-javascript/</a></li><li><img src=https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/24/Italy.png alt=it> <strong>Italian</strong>:
<a href=https://github.com/frappacchio/clean-code-javascript/>frappacchio/clean-code-javascript/</a></li></ul><p><strong><a href=#目錄table-of-contents>⬆ 回到目錄</a></strong></p></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>Feng-Chi</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2020-07-30</span></p><p class=copyright-item><span class=item-title>許可協議</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/clean-code/>clean code</a>
<a href=/tags/javascript/>javascript</a></div><nav class=post-nav><a class=prev href=/post/2020/10/javscript-note/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Javscript 筆記</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/2020/07/30/clean-code-php/><span class="next-text nav-default">Clean Code 系列 - PHP</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=comments-gitment></div><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.min.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.min.js crossorigin=anonymous></script><script type=text/javascript>var gitment=new Gitment({id:'2020-07-30 08:10:05 \x2b0800 \x2b0800',title:'Clean Code 系列 - Javascript',link:decodeURI(location.href),desc:'',owner:'holmeslin',repo:'holmeslin.github.io',oauth:{client_id:'05f414719d56905a1d49',client_secret:'7d76251defef60a6cc6aa55627c7c2f51b7429b0'}});gitment.render('comments-gitment');</script><noscript>Please enable JavaScript to view the <a href=https://github.com/imsun/gitment>comments powered by gitment.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:holmes.lin@gmail.com class="iconfont icon-email" title=email></a><a href=https://facebook.com/fengchilin class="iconfont icon-facebook" title=facebook></a><a href=https://www.linkedin.com/in/holmeslin/ class="iconfont icon-linkedin" title=linkedin></a><a href=https://github.com/holmeslin class="iconfont icon-github" title=github></a><a href=https://holmeslin.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2019 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Feng-Chi</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js></script></body></html>